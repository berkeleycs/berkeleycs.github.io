
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="description" content ="CS 61A: Structure and Interpretation of Computer Programs" />
    <meta name="keywords" content ="CS 61A, Computer Science, CS, 61A, Programming, John DeNero, Berkeley, EECS" />
    <meta name="author" content ="Pamela Fox, Paul Hilfinger" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-throttle-debounce/1.1/jquery.ba-throttle-debounce.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="../../assets/js/hl.js"></script>
    <script>
        // we aren't registering builtins since
        //      (1) they don't render differently in the current CSS from other names
        //      (2) it's a mess to list all of them. You can extract from the site but that takes effort
        // if (1) ceases to be true, (2) might be worth the effort. For now, we're leaving as is
        hljsRegister({
            'keyword': "define if cond and or let begin lambda mu quote delay cons-stream set! quasiquote unquote unquote-splicing define-macro"
        });
        hljs.initHighlightingOnLoad();
    </script>
    <script src="../../assets/js/dark-mode.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata|Roboto:300,400,500|Work+Sans:400,700">
    <link rel="stylesheet" href="../../assets/css/style.css">
    <link rel="stylesheet" href="../../assets/css/mono-blue.css">
    <link rel="icon" href="../../assets/images/favicon.ico">

    

    <title>
Lab 7: Object-Oriented Programming, Linked Lists, Mutable Trees | CS 61A Spring 2021
</title>
  </head>

  <body id="index" class="home">
    <nav class="navbar navbar-default navbar-static-top">
      <div class="container noselect">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-section">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../../index.html">
            <img style="max-width:60px; margin-top: -20px;" class="logo" src="../../assets/images/logo.png"/>
          </a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse-section">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="../../weekly/index.html">Weekly Schedule</a></li>
            <li><a href="../../office-hours/index.html">Office Hours</a></li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="index.html#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Staff
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="../../instructor/index.html">Instructors</a></li>
                <li><a href="../../TAs/index.html">TAs</a></li>
                <li><a href="../../tutors/index.html">Tutors</a></li>
                <li><a href="../../academic-interns/index.html">Academic Interns</a></li>
              </ul>
            </li>
            <li><a href="../../resources/index.html">Resources</a></li>
            <li><a href="../../articles/about/index.html">Syllabus</a></li>
            <li><a href="https://piazza.com/berkeley/spring2021/cs61a" target="_blank">Piazza</a></li>
            <li><a href="https://code.cs61a.org">Code</a></li>
            <li><a href="http://tutor.cs61a.org">PyTutor</a></li>
            <li><a href="../../contact/index.html">Contact</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <main id="content" class="container">
      
<div class='row'>
  <div class='col-md-9'>
    <header>
      <h1>
        
Lab 7: Object-Oriented Programming, Linked Lists, Mutable Trees

        
        
        <ul class="inline-block list-inline">
          <li><a href="lab07.zip" class="label label-outline">lab07.zip</a></li>
        </ul>
        
        
      </h1>
    </header>
    

<p><i>Due by 11:59pm on Tuesday, March 9.</i></p>






<h2 id='starter-files'>Starter Files</h2>

<p>Download <a href="lab07.zip">lab07.zip</a>.
Inside the archive, you will find starter files for the questions in this lab,
  along with a copy of the <a href="ok">Ok</a> autograder.</p>








    
<h1 id="topics">Topics</h1>


<p>Consult this section if you need a refresher on the material for this lab. It's
okay to skip directly to <a href="index.html#required-questions">the questions</a> and refer back
here should you get stuck.</p>


        <button id='toggle-1' class='btn btn-outline btn-lg alwaystoggle toggle'>
        Object-Oriented Programming<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-1">

<h2 id="object-oriented-programming">Object-Oriented Programming</h2>


<blockquote><p><strong>Minilecture Video: <a href="https://youtu.be/5uNdgu4mxxQ">OOP</a></strong></p></blockquote>

<p><strong>Object-oriented programming</strong> (OOP) is a style of programming that
allows you to think of code in terms of "objects." Here's an example of
a <code>Car</code> class:</p>

<pre><code>class Car:
    num_wheels = 4

    def __init__(self, color):
        self.wheels = Car.num_wheels
        self.color = color

    def drive(self):
        if self.wheels &lt;= Car.num_wheels:
            return self.color + &#x27; car cannot drive!&#x27;
        return self.color + &#x27; car goes vroom!&#x27;

    def pop_tire(self):
        if self.wheels &gt; 0:
            self.wheels &#x2d;= 1</code></pre>

<p>Here's some terminology:</p>

<ul>
  <li><strong>class</strong>: a blueprint for how to build a certain type of object.
  The <code>Car</code> class (shown above) describes the behavior and data that
  all <code>Car</code> objects have.</li>
  <li><p><strong>instance</strong>: a particular occurrence of a class. In Python, we
  create instances of a class like this:</p>

<pre><code>&gt;&gt;&gt; my_car = Car(&#x27;red&#x27;)</code></pre>

  <p><code>my_car</code> is an instance of the <code>Car</code> class.</p></li>
  <li><p><strong>data attributes</strong>: a variable that belongs to the instance
  (also called instance variables).
  Think of a data attribute as a quality of the object: cars have <em>wheels</em>
  and <em>color</em>, so we have given our <code>Car</code> instance <code>self.wheels</code> and
  <code>self.color</code> attributes. We can access attributes using <strong>dot
  notation</strong>:</p>

<pre><code>&gt;&gt;&gt; my_car.color
&#x27;red&#x27;
&gt;&gt;&gt; my_car.wheels
4</code></pre></li>
  <li><p><strong>method</strong>: Methods are just like normal functions, except that they
  are bound to an instance. Think of a method as a "verb" of
  the class: cars can <em>drive</em> and also <em>pop their tires</em>, so we have
  given our <code>Car</code> instance the methods <code>drive</code> and <code>pop_tire</code>. We call
  methods using <strong>dot notation</strong>:</p>

<pre><code>&gt;&gt;&gt; my_car = Car(&#x27;red&#x27;)
&gt;&gt;&gt; my_car.drive()
&#x27;red car goes vroom!&#x27;</code></pre></li>
  <li><p><strong>constructor</strong>: As with data abstraction, constructors
  build an instance of the class. The constructor for car objects
  is <code>Car(color)</code>. When Python calls that constructor,
  it immediately calls the <code>__init__</code> method. That's where we initialize
  the data attributes:</p>

<pre><code>def __init__(self, color):
    self.wheels = Car.num_wheels
    self.color = color</code></pre>

  <p>The constructor takes in one argument, <code>color</code>. As you can see, this
  constructor also creates the <code>self.wheels</code> and <code>self.color</code> attributes.</p></li>
  <li><p><code>self</code>: in Python, <code>self</code> is the first parameter for many methods
  (in this class, we will only use methods whose first parameter is
  <code>self</code>). When a method is called, <code>self</code> is bound to an instance of
  the class. For example:</p>

<pre><code>&gt;&gt;&gt; my_car = Car(&#x27;red&#x27;)
&gt;&gt;&gt; car.drive()</code></pre>

  <p>Notice that the <code>drive</code> method takes in <code>self</code> as an argument, but it
  looks like we didn't pass one in! This is because the dot notation
  <em>implicitly</em> passes in <code>car</code> as <code>self</code> for us.
  </div>
  <br>
  
        <button id='toggle-2' class='btn btn-outline btn-lg alwaystoggle toggle'>
        Linked Lists<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-2"></p>

  <h2 id="linked-lists">Linked Lists</h2>


  <blockquote><p><strong>Minilecture Video: <a href="https://youtu.be/pq8gEHEtvA4">Linked Lists</a></strong></p></blockquote></li>
</ul>

<p>We've learned that a Python list is one way to store sequential values. Another
type of list is a linked list. A Python list stores all of its elements in a
single object, and each element can be accessed by using its index. A linked
list, on the other hand, is a recursive object that only stores two things: its
first value and a reference to the rest of the list, which is another linked
list.</p>

<p>We can implement a class, <code>Link</code>, that represents a linked list object.  Each
instance of <code>Link</code> has two instance attributes, <code>first</code> and <code>rest</code>.</p>

<pre><code>class Link:
    &quot;&quot;&quot;A linked list.

    &gt;&gt;&gt; s = Link(1)
    &gt;&gt;&gt; s.first
    1
    &gt;&gt;&gt; s.rest is Link.empty
    True
    &gt;&gt;&gt; s = Link(2, Link(3, Link(4)))
    &gt;&gt;&gt; s.first = 5
    &gt;&gt;&gt; s.rest.first = 6
    &gt;&gt;&gt; s.rest.rest = Link.empty
    &gt;&gt;&gt; s                                    # Displays the contents of repr(s)
    Link(5, Link(6))
    &gt;&gt;&gt; s.rest = Link(7, Link(Link(8, Link(9))))
    &gt;&gt;&gt; s
    Link(5, Link(7, Link(Link(8, Link(9)))))
    &gt;&gt;&gt; print(s)                             # Prints str(s)
    &lt;5 7 &lt;8 9&gt;&gt;
    &quot;&quot;&quot;
    empty = ()

    def __init__(self, first, rest=empty):
        assert rest is Link.empty or isinstance(rest, Link)
        self.first = first
        self.rest = rest

    def __repr__(self):
        if self.rest is not Link.empty:
            rest_repr = &#x27;, &#x27; + repr(self.rest)
        else:
            rest_repr = &#x27;&#x27;
        return &#x27;Link(&#x27; + repr(self.first) + rest_repr + &#x27;)&#x27;

    def __str__(self):
        string = &#x27;&lt;&#x27;
        while self.rest is not Link.empty:
            string += str(self.first) + &#x27; &#x27;
            self = self.rest
        return string + str(self.first) + &#x27;&gt;&#x27;</code></pre>

<p>A valid linked list can be one of the following:</p>

<ol>
  <li>An empty linked list (<code>Link.empty</code>)</li>
  <li>A <code>Link</code> object containing the first value of the linked list and a
  reference to the rest of the linked list</li>
</ol>

<p>What makes a linked list recursive is that the <code>rest</code> attribute of a single
<code>Link</code> instance is another linked list! In the big picture, each <code>Link</code>
instance stores a single value of the list.  When multiple <code>Link</code>s are linked
together through each instance's <code>rest</code> attribute, an entire sequence is
formed.</p>

<blockquote><p><em>Note</em>: This definition means that the <code>rest</code> attribute of any <code>Link</code>
instance <em>must</em> be either <code>Link.empty</code> or another <code>Link</code> instance! This is
enforced in <code>Link.__init__</code>, which raises an <code>AssertionError</code> if the value
passed in for <code>rest</code> is neither of these things.</p></blockquote>

<p>To check if a linked list is empty, compare it against the class attribute
<code>Link.empty</code>. For example, the function below prints out whether or not the
link it is handed is empty:</p>

<pre><code>def test_empty(link):
    if link is Link.empty:
        print(&#x27;This linked list is empty!&#x27;)
    else:
        print(&#x27;This linked list is not empty!&#x27;)</code></pre>

</div>
<br>

        <button id='toggle-3' class='btn btn-outline btn-lg alwaystoggle toggle'>
        Mutable Trees<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-3">

<h2 id="mutable-trees">Mutable Trees</h2>


<blockquote><p><strong>Minilecture Video: <a href="https://youtu.be/FzOwLI-M-LY">Mutable Trees</a></strong></p></blockquote>

<p>Recall that a tree is a recursive abstract data type that has a <code>label</code> (the
value stored in the root of the tree) and <code>branches</code> (a list of trees directly
underneath the root).</p>

<p>We saw one way to implement the tree ADT -- using constructor and selector
functions that treat trees as lists. Another, more formal, way to implement the
tree ADT is with a class. Here is part of the class definition for <code>Tree</code>,
which can be found in <code>lab07.py</code>:</p>

<pre><code>class Tree:
    &quot;&quot;&quot;
    &gt;&gt;&gt; t = Tree(3, [Tree(2, [Tree(5)]), Tree(4)])
    &gt;&gt;&gt; t.label
    3
    &gt;&gt;&gt; t.branches[0].label
    2
    &gt;&gt;&gt; t.branches[1].is_leaf()
    True
    &quot;&quot;&quot;
    def __init__(self, label, branches=[]):
        for b in branches:
            assert isinstance(b, Tree)
        self.label = label
        self.branches = list(branches)

    def is_leaf(self):
        return not self.branches</code></pre>

<p>Even though this is a new implementation, everything we know about the tree ADT
remains true.  That means that solving problems involving trees as objects uses
the same techniques that we developed when first studying the tree ADT (e.g. we
can still use recursion on the branches!).  The main difference, aside from
syntax, is that tree objects are mutable.</p>

<p>Here is a summary of the differences between the tree ADT implemented using
functions and lists vs. implemented using a class:</p>




        <div class="table-responsive">
          <table class="table table-bordered">
          
  <tr>
    <th>-</th>
    <th>Tree constructor and selector functions</th>
    <th>Tree class</th>
  </tr>
  <tr>
    <td>Constructing a tree</td>
    <td>To construct a tree given a <code>label</code> and a list of <code>branches</code>, we call <code>tree(label, branches)</code></td>
    <td>To construct a tree object given a <code>label</code> and a list of <code>branches</code>, we call <code>Tree(label, branches)</code> (which calls the <code>Tree.__init__</code> method)</td>
  </tr>
  <tr>
    <td>Label and branches</td>
    <td>To get the label or branches of a tree <code>t</code>, we call <code>label(t)</code> or <code>branches(t)</code> respectively</td>
    <td>To get the label or branches of a tree <code>t</code>, we access the instance attributes <code>t.label</code> or <code>t.branches</code> respectively</td>
  </tr>
  <tr>
    <td>Mutability</td>
    <td>The tree ADT is immutable because we cannot assign values to call expressions</td>
    <td>The <code>label</code> and <code>branches</code> attributes of a <code>Tree</code> instance can be reassigned, mutating the tree</td>
  </tr>
  <tr>
    <td>Checking if a tree is a leaf</td>
    <td>To check whether a tree <code>t</code> is a leaf, we call the convenience function <code>is_leaf(t)</code></td>
    <td>To check whether a tree <code>t</code> is a leaf, we call the bound method <code>t.is_leaf()</code>. This method can only be called on <code>Tree</code> objects.</td>
  </tr>

          </table>
        </div>
        


</div>
<br>


<h1 id="required-questions">Required Questions</h1>



<h2 id="wwpd-objects">WWPD: Objects</h2>


<h3 class="question" id="q1">Q1: The Car class</h3>

<p><strong>Note:</strong> These questions use inheritance. For an overview of inheritance, see the <a href="http://composingprograms.com/pages/25-object-oriented-programming.html#inheritance">inheritance portion</a> of Composing Programs</p>

<p>Below is the definition of a <code>Car</code> class that we will be using in the following WWPD questions.
<strong>Note:</strong> This definition can also be found in <code>car.py</code>.</p>

<pre><code>class Car:
    num_wheels = 4
    gas = 30
    headlights = 2
    size = &#x27;Tiny&#x27;

    def __init__(self, make, model):
        self.make = make
        self.model = model
        self.color = &#x27;No color yet. You need to paint me.&#x27;
        self.wheels = Car.num_wheels
        self.gas = Car.gas

    def paint(self, color):
        self.color = color
        return self.make + &#x27; &#x27; + self.model + &#x27; is now &#x27; + color

    def drive(self):
        if self.wheels &lt; Car.num_wheels or self.gas &lt;= 0:
            return &#x27;Cannot drive!&#x27;
        self.gas &#x2d;= 10
        return self.make + &#x27; &#x27; + self.model + &#x27; goes vroom!&#x27;

    def pop_tire(self):
        if self.wheels &gt; 0:
            self.wheels &#x2d;= 1

    def fill_gas(self):
        self.gas += 20
        return &#x27;Gas level: &#x27; + str(self.gas)</code></pre>

<blockquote><p>Use Ok to test your knowledge with the following What would Python Display
questions.</p>

<pre><code>python3 ok &#x2d;q wwpd&#x2d;car &#x2d;u</code></pre>

<p>If an error occurs, type Error. If nothing is displayed, type Nothing.</p></blockquote>

<!--

<blockquote><pre><code>python3 ok &#x2d;q food_truck &#x2d;u</code></pre>

<p>--></p></blockquote>

<!-- <pre><code>&gt;&gt;&gt; garcias_car = Car(&#x27;Tesla&#x27;, &#x27;Model S&#x27;)
&gt;&gt;&gt; garcias_car.color
<div class="alt prompt-1">______</div><div class="solution prompt-1">&#x27;&#x4e;&#x6f;&#x20;&#x63;&#x6f;&#x6c;&#x6f;&#x72;&#x20;&#x79;&#x65;&#x74;&#x2e;&#x20;&#x59;&#x6f;&#x75;&#x20;&#x6e;&#x65;&#x65;&#x64;&#x20;&#x74;&#x6f;&#x20;&#x70;&#x61;&#x69;&#x6e;&#x74;&#x20;&#x6d;&#x65;&#x2e;&#x27;</div>
&gt;&gt;&gt; garcias_car.paint(&#x27;black&#x27;)
<div class="alt prompt-1">______</div><div class="solution prompt-1">&#x27;&#x54;&#x65;&#x73;&#x6c;&#x61;&#x20;&#x4d;&#x6f;&#x64;&#x65;&#x6c;&#x20;&#x53;&#x20;&#x69;&#x73;&#x20;&#x6e;&#x6f;&#x77;&#x20;&#x62;&#x6c;&#x61;&#x63;&#x6b;&#x27;</div>
&gt;&gt;&gt; garcias_car.color
<div class="alt prompt-1">______</div><div class="solution prompt-1">&#x27;&#x62;&#x6c;&#x61;&#x63;&#x6b;&#x27;</div></code></pre>
        <button id='prompt-1' class='btn btn-outline btn-lg solutiontoggle prompt'>
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
         -->
<!--
<pre><code>&gt;&gt;&gt; garcias_car = Car(&#x27;Tesla&#x27;, &#x27;Model S&#x27;)
&gt;&gt;&gt; garcias_truck = MonsterTruck(&#x27;Monster Truck&#x27;, &#x27;XXL&#x27;)
&gt;&gt;&gt; garcias_car.size
<div class="alt prompt-2">______</div><div class="solution prompt-2">&#x27;&#x54;&#x69;&#x6e;&#x79;&#x27;</div>
&gt;&gt;&gt; garcias_truck.size
<div class="alt prompt-2">______</div><div class="solution prompt-2">&#x27;&#x4d;&#x6f;&#x6e;&#x73;&#x74;&#x65;&#x72;&#x27;</div></code></pre>
        <button id='prompt-2' class='btn btn-outline btn-lg solutiontoggle prompt'>
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        
-->
<pre><code>&gt;&gt;&gt; deneros_car = Car(&#x27;Tesla&#x27;, &#x27;Model S&#x27;)
&gt;&gt;&gt; deneros_car.model
<div class="alt prompt-3">______</div><div class="solution prompt-3">&#x27;&#x4d;&#x6f;&#x64;&#x65;&#x6c;&#x20;&#x53;&#x27;</div>
&gt;&gt;&gt; deneros_car.gas = 10
&gt;&gt;&gt; deneros_car.drive()
<div class="alt prompt-3">______</div><div class="solution prompt-3">&#x27;&#x54;&#x65;&#x73;&#x6c;&#x61;&#x20;&#x4d;&#x6f;&#x64;&#x65;&#x6c;&#x20;&#x53;&#x20;&#x67;&#x6f;&#x65;&#x73;&#x20;&#x76;&#x72;&#x6f;&#x6f;&#x6d;&#x21;&#x27;</div>
&gt;&gt;&gt; deneros_car.drive()
<div class="alt prompt-3">______</div><div class="solution prompt-3">&#x27;&#x43;&#x61;&#x6e;&#x6e;&#x6f;&#x74;&#x20;&#x64;&#x72;&#x69;&#x76;&#x65;&#x21;&#x27;</div>
&gt;&gt;&gt; deneros_car.fill_gas()
<div class="alt prompt-3">______</div><div class="solution prompt-3">&#x27;&#x47;&#x61;&#x73;&#x20;&#x6c;&#x65;&#x76;&#x65;&#x6c;&#x3a;&#x20;&#x32;&#x30;&#x27;</div>
&gt;&gt;&gt; deneros_car.gas
<div class="alt prompt-3">______</div><div class="solution prompt-3">&#x32;&#x30;</div>
&gt;&gt;&gt; Car.gas
<div class="alt prompt-3">______</div><div class="solution prompt-3">&#x33;&#x30;</div></code></pre>
        <button id='prompt-3' class='btn btn-outline btn-lg solutiontoggle prompt'>
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        

<!-- <pre><code>&gt;&gt;&gt; Car.headlights
<div class="alt prompt-4">______</div><div class="solution prompt-4">&#x32;</div>
&gt;&gt;&gt; garcias_car.headlights
<div class="alt prompt-4">______</div><div class="solution prompt-4">&#x32;</div>
&gt;&gt;&gt; Car.headlights = 3
&gt;&gt;&gt; garcias_car.headlights
<div class="alt prompt-4">______</div><div class="solution prompt-4">&#x33;</div>
&gt;&gt;&gt; garcias_car.headlights = 2
&gt;&gt;&gt; Car.headlights
<div class="alt prompt-4">______</div><div class="solution prompt-4">&#x33;</div></code></pre>
        <button id='prompt-4' class='btn btn-outline btn-lg solutiontoggle prompt'>
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
         -->

<pre><code>&gt;&gt;&gt; deneros_car = Car(&#x27;Tesla&#x27;, &#x27;Model S&#x27;)
&gt;&gt;&gt; deneros_car.wheels = 2
&gt;&gt;&gt; deneros_car.wheels
<div class="alt prompt-5">______</div><div class="solution prompt-5">&#x32;</div>
&gt;&gt;&gt; Car.num_wheels
<div class="alt prompt-5">______</div><div class="solution prompt-5">&#x34;</div>
&gt;&gt;&gt; deneros_car.drive()
<div class="alt prompt-5">______</div><div class="solution prompt-5">&#x27;&#x43;&#x61;&#x6e;&#x6e;&#x6f;&#x74;&#x20;&#x64;&#x72;&#x69;&#x76;&#x65;&#x21;&#x27;</div>
&gt;&gt;&gt; Car.drive()
<div class="alt prompt-5">______</div><div class="solution prompt-5">&#x45;&#x72;&#x72;&#x6f;&#x72;&#x20;&#x28;&#x54;&#x79;&#x70;&#x65;&#x45;&#x72;&#x72;&#x6f;&#x72;&#x29;</div>
&gt;&gt;&gt; Car.drive(deneros_car)
<div class="alt prompt-5">______</div><div class="solution prompt-5">&#x27;&#x43;&#x61;&#x6e;&#x6e;&#x6f;&#x74;&#x20;&#x64;&#x72;&#x69;&#x76;&#x65;&#x21;&#x27;</div></code></pre>
        <button id='prompt-5' class='btn btn-outline btn-lg solutiontoggle prompt'>
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        
<!--

<pre><code>&gt;&gt;&gt; MonsterTruck.drive(garcias_car)
Error (AttributeError)</code></pre>

-->

<p>For the following, we reference the <code>MonsterTruck</code> class below.
<strong>Note</strong>: The <code>MonsterTruck</code> class can also be found in <code>car.py</code>.</p>

<pre><code> class MonsterTruck(Car):
     size = &#x27;Monster&#x27;

     def rev(self):
         print(&#x27;Vroom! This Monster Truck is huge!&#x27;)

     def drive(self):
         self.rev()
         return Car.drive(self)</code></pre>

<pre><code>&gt;&gt;&gt; deneros_car = MonsterTruck(&#x27;Monster&#x27;, &#x27;Batmobile&#x27;)
&gt;&gt;&gt; deneros_car.drive()
<div class="alt prompt-6">______</div><div class="solution prompt-6">&#x56;&#x72;&#x6f;&#x6f;&#x6d;&#x21;&#x20;&#x54;&#x68;&#x69;&#x73;&#x20;&#x4d;&#x6f;&#x6e;&#x73;&#x74;&#x65;&#x72;&#x20;&#x54;&#x72;&#x75;&#x63;&#x6b;&#x20;&#x69;&#x73;&#x20;&#x68;&#x75;&#x67;&#x65;&#x21;&#xa;&#x27;&#x4d;&#x6f;&#x6e;&#x73;&#x74;&#x65;&#x72;&#x20;&#x42;&#x61;&#x74;&#x6d;&#x6f;&#x62;&#x69;&#x6c;&#x65;&#x20;&#x67;&#x6f;&#x65;&#x73;&#x20;&#x76;&#x72;&#x6f;&#x6f;&#x6d;&#x21;&#x27;</div>
&gt;&gt;&gt; Car.drive(deneros_car)
<div class="alt prompt-6">______</div><div class="solution prompt-6">&#x27;&#x4d;&#x6f;&#x6e;&#x73;&#x74;&#x65;&#x72;&#x20;&#x42;&#x61;&#x74;&#x6d;&#x6f;&#x62;&#x69;&#x6c;&#x65;&#x20;&#x67;&#x6f;&#x65;&#x73;&#x20;&#x76;&#x72;&#x6f;&#x6f;&#x6d;&#x21;&#x27;</div>
&gt;&gt;&gt; MonsterTruck.drive(deneros_car)
<div class="alt prompt-6">______</div><div class="solution prompt-6">&#x56;&#x72;&#x6f;&#x6f;&#x6d;&#x21;&#x20;&#x54;&#x68;&#x69;&#x73;&#x20;&#x4d;&#x6f;&#x6e;&#x73;&#x74;&#x65;&#x72;&#x20;&#x54;&#x72;&#x75;&#x63;&#x6b;&#x20;&#x69;&#x73;&#x20;&#x68;&#x75;&#x67;&#x65;&#x21;&#xa;&#x27;&#x4d;&#x6f;&#x6e;&#x73;&#x74;&#x65;&#x72;&#x20;&#x42;&#x61;&#x74;&#x6d;&#x6f;&#x62;&#x69;&#x6c;&#x65;&#x20;&#x67;&#x6f;&#x65;&#x73;&#x20;&#x76;&#x72;&#x6f;&#x6f;&#x6d;&#x21;&#x27;</div>
&gt;&gt;&gt; Car.rev(deneros_car)
<div class="alt prompt-6">______</div><div class="solution prompt-6">&#x45;&#x72;&#x72;&#x6f;&#x72;&#x20;&#x28;&#x41;&#x74;&#x74;&#x72;&#x69;&#x62;&#x75;&#x74;&#x65;&#x45;&#x72;&#x72;&#x6f;&#x72;&#x29;</div></code></pre>
        <button id='prompt-6' class='btn btn-outline btn-lg solutiontoggle prompt'>
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        
<!--
<pre><code>&gt;&gt;&gt; class FoodTruck(MonsterTruck):
...    delicious = &#x27;meh&#x27;
...    def serve(self):
...        if FoodTruck.size == &#x27;delicious&#x27;:
...            print(&#x27;Yum!&#x27;)
...        if self.food != &#x27;Tacos&#x27;:
...            return &#x27;But no tacos...&#x27;
...        else:
...            return &#x27;Mmm!&#x27;
&gt;&gt;&gt; taco_truck = FoodTruck(&#x27;Tacos&#x27;, &#x27;Truck&#x27;)
&gt;&gt;&gt; taco_truck.food = &#x27;Guacamole&#x27;
&gt;&gt;&gt; taco_truck.serve()
<div class="alt prompt-7">______</div><div class="solution prompt-7">&#x27;&#x42;&#x75;&#x74;&#x20;&#x6e;&#x6f;&#x20;&#x74;&#x61;&#x63;&#x6f;&#x73;&#x2e;&#x2e;&#x2e;&#x27;</div>
&gt;&gt;&gt; taco_truck.food = taco_truck.make
&gt;&gt;&gt; FoodTruck.size = taco_truck.delicious
&gt;&gt;&gt; taco_truck.serve()
<div class="alt prompt-7">______</div><div class="solution prompt-7">&#x27;&#x4d;&#x6d;&#x6d;&#x21;&#x27;</div>
&gt;&gt;&gt; taco_truck.size = &#x27;delicious&#x27;
&gt;&gt;&gt; taco_truck.serve()
<div class="alt prompt-7">______</div><div class="solution prompt-7">&#x27;&#x4d;&#x6d;&#x6d;&#x21;&#x27;</div>
&gt;&gt;&gt; FoodTruck.pop_tire()
<div class="alt prompt-7">______</div><div class="solution prompt-7">&#x45;&#x72;&#x72;&#x6f;&#x72;</div>
&gt;&gt;&gt; FoodTruck.pop_tire(taco_truck)
<div class="alt prompt-7">______</div><div class="solution prompt-7">&#x4e;&#x6f;&#x74;&#x68;&#x69;&#x6e;&#x67;</div>
&gt;&gt;&gt; taco_truck.drive()
<div class="alt prompt-7">______</div><div class="solution prompt-7">&#x56;&#x72;&#x6f;&#x6f;&#x6d;&#x21;&#x20;&#x54;&#x68;&#x69;&#x73;&#x20;&#x4d;&#x6f;&#x6e;&#x73;&#x74;&#x65;&#x72;&#x20;&#x54;&#x72;&#x75;&#x63;&#x6b;&#x20;&#x69;&#x73;&#x20;&#x68;&#x75;&#x67;&#x65;&#x21;&#xa;&#x27;&#x54;&#x61;&#x63;&#x6f;&#x73;&#x20;&#x54;&#x72;&#x75;&#x63;&#x6b;&#x20;&#x63;&#x61;&#x6e;&#x6e;&#x6f;&#x74;&#x20;&#x64;&#x72;&#x69;&#x76;&#x65;&#x21;&#x27;</div></code></pre>
        <button id='prompt-7' class='btn btn-outline btn-lg solutiontoggle prompt'>
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        
-->


<h2 id="magic-the-lambda-ing">Magic: The Lambda-ing</h2>


<p>In the next part of this lab, we will be implementing a card game! This game is inspired by the similarly named <a href="https://en.wikipedia.org/wiki/Magic:_The_Gathering">Magic: The Gathering</a>.</p>

<p>You can start the game by typing:</p>

<pre><code>python3 cardgame.py</code></pre>

<p><strong>This game doesn't work yet</strong>. If we run this right now, the code will
error, since we haven't implemented anything yet. When it's working, you
can exit the game and return to the command line with <code>Ctrl&#x2d;C</code> or <code>Ctrl&#x2d;D</code>.</p>

<p>This game uses several different files.</p>

<ul>
  <li>Code for all the questions in this lab can be found in <code>classes.py</code>.</li>
  <li>Some utility for the game can be found in <code>cardgame.py</code>, but you won't need
  to open or read this file. This file doesn't actually mutate any instances
  directly - instead, it calls methods of the different classes, maintaining
  a strict abstraction barrier.</li>
  <li>If you want to modify your game later to add your own custom cards and decks,
  you can look in <code>cards.py</code> to see all the standard cards and the default deck;
  here, you can add more cards and change what decks you and your opponent use.
  If you're familiar with the original game, you may notice the cards were not 
  created with balance in mind, so feel free to modify the stats
  and add/remove cards as desired.</li>
</ul>

<p><strong>Rules of the Game</strong> This game is a little involved, though not nearly as much as its namesake. Here's
how it goes:</p>

<p>There are two players. Each player has a hand of cards and a deck, and at the
start of each round, each player draws a random card from their deck. If a player's
deck is empty when they try to draw, they will automatically lose the game.
Cards have a name, an attack statistic, and a defense statistic. Each round, each player
chooses one card to play from their own hands. The card with the higher <em>power</em>
wins the round. Each played card's power value is calculated as follows:</p>

<pre><code>(player card&#x27;s attack) &#x2d; (opponent card&#x27;s defense) / 2</code></pre>

<p>For example, let's say Player 1 plays a card with 2000 attack/1000 defense and Player 2 plays
a card with 1500 attack/3000 defense. Their cards' powers are calculated as:</p>

<pre><code>P1: 2000 &#x2d; 3000/2 = 2000 &#x2d; 1500 = 500
P2: 1500 &#x2d; 1000/2 = 1500 &#x2d; 500 = 1000</code></pre>

<p>So Player 2 would win this round.</p>

<p>The first player to win 8 rounds wins the match!</p>

<p>However, there are a few effects we can add (in the optional questions section) to
make this game a bit more interesting. Cards are split into Tutor, TA, and Professor
types, and each type has a different <em>effect</em> when they're played. All effects are applied
before power is calculated during that round:</p>

<ul>
  <li>A Tutor card will cause the opponent to discard and re-draw the first 3 cards in their hand.</li>
  <li>A TA card will swap the opponent card's attack and defense.
  <!-- * An Instructor will add 300 attack and defense to all cards in the player's deck, and then
  add a copy of the opponent's card to both the player's deck and the player's hand.--></li>
  <li>A Professor card will add the opponent card's attack and defense to all cards in their deck and
  then remove all cards in the opponent's deck that share its attack <em>or</em> defense!</li>
</ul>

<p>These are a lot of rules to remember, so refer back here if you need to review them,
and let's start making the game!</p>

<h3 class="question" id="q2">Q2: Making Cards</h3>

<p>To play a card game, we're going to need to have cards, so let's make some!
We're gonna implement the basics of the <code>Card</code> class first.</p>

<p>First, implement the <code>Card</code> class constructor in <code>classes.py</code>. This constructor
takes three arguments:</p>

<ul>
  <li>the <code>name</code> of the card, a string</li>
  <li>the <code>attack</code> stat of the card, an integer</li>
  <li>the <code>defense</code> stat of the card, an integer</li>
</ul>

<p>Each <code>Card</code> instance should keep track of these values using instance attributes
called <code>name</code>, <code>attack</code>, and <code>defense</code>.</p>

<p>You should also implement the <code>power</code> method in <code>Card</code>, which takes in another card as
an input and calculates the current card's power. Check the Rules section if you want
a refresher on how power is calculated.</p>

<solution>

<pre><code>class Card:
    cardtype = &#x27;Staff&#x27;

    def __init__(self, name, attack, defense):
        &quot;&quot;&quot;
        Create a Card object with a name, attack,
        and defense.
        &gt;&gt;&gt; staff_member = Card(&#x27;staff&#x27;, 400, 300)
        &gt;&gt;&gt; staff_member.name
        &#x27;staff&#x27;
        &gt;&gt;&gt; staff_member.attack
        400
        &gt;&gt;&gt; staff_member.defense
        300
        &gt;&gt;&gt; other_staff = Card(&#x27;other&#x27;, 300, 500)
        &gt;&gt;&gt; other_staff.attack
        300
        &gt;&gt;&gt; other_staff.defense
        500
        &quot;&quot;&quot;
        "*** YOUR CODE HERE ***"

    def power(self, opponent_card):
        &quot;&quot;&quot;
        Calculate power as:
        (player card&#x27;s attack) &#x2d; (opponent card&#x27;s defense)/2
        &gt;&gt;&gt; staff_member = Card(&#x27;staff&#x27;, 400, 300)
        &gt;&gt;&gt; other_staff = Card(&#x27;other&#x27;, 300, 500)
        &gt;&gt;&gt; staff_member.power(other_staff)
        150.0
        &gt;&gt;&gt; other_staff.power(staff_member)
        150.0
        &gt;&gt;&gt; third_card = Card(&#x27;third&#x27;, 200, 400)
        &gt;&gt;&gt; staff_member.power(third_card)
        200.0
        &gt;&gt;&gt; third_card.power(staff_member)
        50.0
        &quot;&quot;&quot;
        "*** YOUR CODE HERE ***"
</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q Card.__init__
python3 ok -q Card.power</code></pre>

<h3 class="question" id="q3">Q3: Making a Player</h3>
Now that we have cards, we can make a deck, but we still need players to
actually use them. We'll now fill in the implementation of the <code>Player</code> class.

<p>A <code>Player</code> instance has three instance attributes:</p>

<ul>
  <li><code>name</code> is the player's name. When you play the game, you can enter your name,
  which will be converted into a string to be passed to the constructor.</li>
  <li><code>deck</code> is an instance of the <code>Deck</code> class. You can draw from it using
  its <code>.draw()</code> method.</li>
  <li><code>hand</code> is a list of <code>Card</code> instances. Each player should start with 5
  cards in their hand, drawn from their <code>deck</code>. Each card in the hand can be
  selected by its index in the list during the game. When a player draws a new
  card from the deck, it is added to the end of this list.</li>
</ul>

<p>Complete the implementation of the constructor for <code>Player</code> so that <code>self.hand</code>
is set to a list of 5 cards drawn from the player's <code>deck</code>.</p>

<p>Next, implement the <code>draw</code> and <code>play</code> methods in the <code>Player</code> class.  The
<code>draw</code> method draws a card from the deck and adds it to the
player's hand. The <code>play</code> method removes and returns a card from the player's hand at the
given index.</p>

<blockquote><p>Call <code>deck.draw()</code> when implementing <code>Player.__init__</code> and <code>Player.draw</code>.
Don't worry about how this function works - leave it all to the abstraction!</p></blockquote>

<solution>

<pre><code>class Player:
    def __init__(self, deck, name):
        &quot;&quot;&quot;Initialize a Player object.
        A Player starts the game by drawing 5 cards from their deck. Each turn,
        a Player draws another card from the deck and chooses one to play.
        &gt;&gt;&gt; test_card = Card(&#x27;test&#x27;, 100, 100)
        &gt;&gt;&gt; test_deck = Deck([test_card.copy() for _ in range(6)])
        &gt;&gt;&gt; test_player = Player(test_deck, &#x27;tester&#x27;)
        &gt;&gt;&gt; len(test_deck.cards)
        1
        &gt;&gt;&gt; len(test_player.hand)
        5
        &quot;&quot;&quot;
        self.deck = deck
        self.name = name
        "*** YOUR CODE HERE ***"

    def draw(self):
        &quot;&quot;&quot;Draw a card from the player&#x27;s deck and add it to their hand.
        &gt;&gt;&gt; test_card = Card(&#x27;test&#x27;, 100, 100)
        &gt;&gt;&gt; test_deck = Deck([test_card.copy() for _ in range(6)])
        &gt;&gt;&gt; test_player = Player(test_deck, &#x27;tester&#x27;)
        &gt;&gt;&gt; test_player.draw()
        &gt;&gt;&gt; len(test_deck.cards)
        0
        &gt;&gt;&gt; len(test_player.hand)
        6
        &quot;&quot;&quot;
        assert not self.deck.is_empty(), &#x27;Deck is empty!&#x27;
        "*** YOUR CODE HERE ***"

    def play(self, card_index):
        &quot;&quot;&quot;Remove and return a card from the player&#x27;s hand at the given index.
        &gt;&gt;&gt; from cards import *
        &gt;&gt;&gt; test_player = Player(standard_deck, &#x27;tester&#x27;)
        &gt;&gt;&gt; ta1, ta2 = TACard(&quot;ta_1&quot;, 300, 400), TACard(&quot;ta_2&quot;, 500, 600)
        &gt;&gt;&gt; tutor1, tutor2 = TutorCard(&quot;t1&quot;, 200, 500), TutorCard(&quot;t2&quot;, 600, 400)
        &gt;&gt;&gt; test_player.hand = [ta1, ta2, tutor1, tutor2]
        &gt;&gt;&gt; test_player.play(0) is ta1
        True
        &gt;&gt;&gt; test_player.play(2) is tutor2
        True
        &gt;&gt;&gt; len(test_player.hand)
        2
        &quot;&quot;&quot;
        "*** YOUR CODE HERE ***"
</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q Player.__init__
python3 ok -q Player.draw
python3 ok -q Player.play</code></pre>

<p>After you complete this problem, you'll be able to play a working version of
the game! Type</p>

<pre><code>python3 cardgame.py</code></pre>

<p>to start a game of Magic: The Lambda-ing!</p>

<p>This version doesn't have the effects for different cards, yet - to get those
working, try out the optional questions below.</p>


<h2 id="wwpd-linked-lists">WWPD: Linked Lists</h2>

<h3 class="question" id="q4">Q4: WWPD: Linked Lists</h3>

<blockquote><p><strong>Minilecture Video: <a href="https://youtu.be/pq8gEHEtvA4">Linked Lists</a></strong></p></blockquote>

<p>Read over the <code>Link</code> class in <code>lab07.py</code>. Make sure you understand the
doctests.</p>

<blockquote><p>Use Ok to test your knowledge with the following "What Would Python Display?"
questions:</p>

<pre><code>python3 ok &#x2d;q link &#x2d;u</code></pre>

<p>Enter <code>Function</code> if you believe the answer is <code>&lt;function ...&gt;</code>, <code>Error</code> if it
errors, and <code>Nothing</code> if nothing is displayed.</p>

<p>If you get stuck, try drawing out the box-and-pointer diagram for the linked
list on a piece of paper or loading the <code>Link</code> class into the interpreter
with <code>python3 &#x2d;i lab07.py</code>.</p></blockquote>

<pre><code>&gt;&gt;&gt; from lab07 import *
&gt;&gt;&gt; link = Link(1000)
&gt;&gt;&gt; link.first
<div class="alt prompt-8">______</div><div class="solution prompt-8">&#x31;&#x30;&#x30;&#x30;</div>
&gt;&gt;&gt; link.rest is Link.empty
<div class="alt prompt-8">______</div><div class="solution prompt-8">&#x54;&#x72;&#x75;&#x65;</div>
&gt;&gt;&gt; link = Link(1000, 2000)
<div class="alt prompt-8">______</div><div class="solution prompt-8">&#x41;&#x73;&#x73;&#x65;&#x72;&#x74;&#x69;&#x6f;&#x6e;&#x45;&#x72;&#x72;&#x6f;&#x72;</div>
&gt;&gt;&gt; link = Link(1000, Link())
<div class="alt prompt-8">______</div><div class="solution prompt-8">&#x54;&#x79;&#x70;&#x65;&#x45;&#x72;&#x72;&#x6f;&#x72;</div></code></pre>
        <button id='prompt-8' class='btn btn-outline btn-lg solutiontoggle prompt'>
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        

<pre><code>&gt;&gt;&gt; from lab07 import *
&gt;&gt;&gt; link = Link(1, Link(2, Link(3)))
&gt;&gt;&gt; link.first
<div class="alt prompt-9">______</div><div class="solution prompt-9">&#x31;</div>
&gt;&gt;&gt; link.rest.first
<div class="alt prompt-9">______</div><div class="solution prompt-9">&#x32;</div>
&gt;&gt;&gt; link.rest.rest.rest is Link.empty
<div class="alt prompt-9">______</div><div class="solution prompt-9">&#x54;&#x72;&#x75;&#x65;</div>
&gt;&gt;&gt; link.first = 9001
&gt;&gt;&gt; link.first
<div class="alt prompt-9">______</div><div class="solution prompt-9">&#x39;&#x30;&#x30;&#x31;</div>
&gt;&gt;&gt; link.rest = link.rest.rest
&gt;&gt;&gt; link.rest.first
<div class="alt prompt-9">______</div><div class="solution prompt-9">&#x33;</div>
&gt;&gt;&gt; link = Link(1)
&gt;&gt;&gt; link.rest = link
&gt;&gt;&gt; link.rest.rest.rest.rest.first
<div class="alt prompt-9">______</div><div class="solution prompt-9">&#x31;</div>
&gt;&gt;&gt; link = Link(2, Link(3, Link(4)))
&gt;&gt;&gt; link2 = Link(1, link)
&gt;&gt;&gt; link2.first
<div class="alt prompt-9">______</div><div class="solution prompt-9">&#x31;</div>
&gt;&gt;&gt; link2.rest.first
<div class="alt prompt-9">______</div><div class="solution prompt-9">&#x32;</div></code></pre>
        <button id='prompt-9' class='btn btn-outline btn-lg solutiontoggle prompt'>
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        

<pre><code>&gt;&gt;&gt; from lab07 import *
&gt;&gt;&gt; link = Link(5, Link(6, Link(7)))
&gt;&gt;&gt; link                  # Look at the __repr__ method of Link
<div class="alt prompt-10">______</div><div class="solution prompt-10">&#x4c;&#x69;&#x6e;&#x6b;&#x28;&#x35;&#x2c;&#x20;&#x4c;&#x69;&#x6e;&#x6b;&#x28;&#x36;&#x2c;&#x20;&#x4c;&#x69;&#x6e;&#x6b;&#x28;&#x37;&#x29;&#x29;&#x29;</div>
&gt;&gt;&gt; print(link)          # Look at the __str__ method of Link
<div class="alt prompt-10">______</div><div class="solution prompt-10">&#x3c;&#x35;&#x20;&#x36;&#x20;&#x37;&#x3e;</div></code></pre>
        <button id='prompt-10' class='btn btn-outline btn-lg solutiontoggle prompt'>
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        


<h2 id="linked-lists-2">Linked Lists</h2>

<h3 class="question" id="q5">Q5: Convert Link</h3>

<p>Write a function <code>convert_link</code> that takes in a linked list and returns the
sequence as a Python list. You may assume that the input list is shallow; none
of the elements is another linked list.</p>

<p>Try to find both an iterative and recursive solution for this problem!</p>

<solution>

<pre><code>def convert_link(link):
    &quot;&quot;&quot;Takes a linked list and returns a Python list with the same elements.

    &gt;&gt;&gt; link = Link(1, Link(2, Link(3, Link(4))))
    &gt;&gt;&gt; convert_link(link)
    [1, 2, 3, 4]
    &gt;&gt;&gt; convert_link(Link.empty)
    []
    &quot;&quot;&quot;
    "*** YOUR CODE HERE ***"
</code></pre>

</solution>



<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q convert_link</code></pre>




<h2 id="trees">Trees</h2>

<h3 class="question" id="q6">Q6: Cumulative Mul</h3>

<blockquote><p><strong>Minilecture Video: <a href="https://youtu.be/FzOwLI-M-LY">Mutable Trees</a></strong></p></blockquote>

<p>Write a function <code>cumulative_mul</code> that mutates the Tree <code>t</code> so that each node's
label becomes the product of all labels in the subtree rooted at the node.</p>

<solution>

<pre><code>def cumulative_mul(t):
    &quot;&quot;&quot;Mutates t so that each node&#x27;s label becomes the product of all labels in
    the corresponding subtree rooted at t.

    &gt;&gt;&gt; t = Tree(1, [Tree(3, [Tree(5)]), Tree(7)])
    &gt;&gt;&gt; cumulative_mul(t)
    &gt;&gt;&gt; t
    Tree(105, [Tree(15, [Tree(5)]), Tree(7)])
    &quot;&quot;&quot;
    "*** YOUR CODE HERE ***"
</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q cumulative_mul</code></pre>


<h1 id="optional-questions">Optional Questions</h1>


<p>The following code-writing questions will all be in <code>classes.py</code>.</p>

<p>For the following sections, do <strong>not</strong> overwrite any lines already provided in the
code. Additionally, make sure to uncomment any calls to <code>print</code> once you have implemented
each method. These are used to display information to the user, and changing them
may cause you to fail tests that you would otherwise pass.</p>

<h3 class="question" id="q7">Q7: Tutors: Flummox</h3>

<p>To really make this card game interesting, our cards should have effects!
We'll do this with the <code>effect</code> function for cards, which takes
in the opponent card, the current player, and the opponent player.</p>

<p>Implement the <code>effect</code> method for Tutors, which causes the opponent to discard
the first 3 cards in their hand and then draw 3 new cards. Assume there at least 3 cards
in the opponent's hand and at least 3 cards in the opponent's deck.</p>

<p>Remember to uncomment the call to <code>print</code> once you're done!</p>

<solution>

<pre><code>class TutorCard(Card):
    cardtype = &#x27;Tutor&#x27;

    def effect(self, opponent_card, player, opponent):
        &quot;&quot;&quot;
        Discard the first 3 cards in the opponent&#x27;s hand and have
        them draw the same number of cards from their deck.
        &gt;&gt;&gt; from cards import *
        &gt;&gt;&gt; player1, player2 = Player(player_deck, &#x27;p1&#x27;), Player(opponent_deck, &#x27;p2&#x27;)
        &gt;&gt;&gt; opponent_card = Card(&#x27;other&#x27;, 500, 500)
        &gt;&gt;&gt; tutor_test = TutorCard(&#x27;Tutor&#x27;, 500, 500)
        &gt;&gt;&gt; initial_deck_length = len(player2.deck.cards)
        &gt;&gt;&gt; tutor_test.effect(opponent_card, player1, player2)
        p2 discarded and re&#x2d;drew 3 cards!
        &gt;&gt;&gt; len(player2.hand)
        5
        &gt;&gt;&gt; len(player2.deck.cards) == initial_deck_length &#x2d; 3
        True
        &quot;&quot;&quot;
        "*** YOUR CODE HERE ***"
        #Uncomment the line below when you&#x27;ve finished implementing this method!
        #print(&#x27;{} discarded and re&#x2d;drew 3 cards!&#x27;.format(opponent.name))</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q TutorCard.effect</code></pre>

<h3 class="question" id="q8">Q8: TAs: Shift</h3>

<p>Let's add an effect for TAs now! Implement the <code>effect</code> method for TAs, which
swaps the attack and defense of the opponent's card.</p>

<solution>

<pre><code>class TACard(Card):
    cardtype = &#x27;TA&#x27;

    def effect(self, opponent_card, player, opponent):
        &quot;&quot;&quot;
        Swap the attack and defense of an opponent&#x27;s card.
        &gt;&gt;&gt; from cards import *
        &gt;&gt;&gt; player1, player2 = Player(player_deck, &#x27;p1&#x27;), Player(opponent_deck, &#x27;p2&#x27;)
        &gt;&gt;&gt; opponent_card = Card(&#x27;other&#x27;, 300, 600)
        &gt;&gt;&gt; ta_test = TACard(&#x27;TA&#x27;, 500, 500)
        &gt;&gt;&gt; ta_test.effect(opponent_card, player1, player2)
        &gt;&gt;&gt; opponent_card.attack
        600
        &gt;&gt;&gt; opponent_card.defense
        300
        &quot;&quot;&quot;
        "*** YOUR CODE HERE ***"
</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q TACard.effect</code></pre>

<h3 class="question" id="q9">Q9: The Professor Arrives</h3>

<p>A new challenger has appeared! Implement the <code>effect</code> method for the Professor,
who adds the opponent card's attack and defense to all cards in the player's
deck and then removes <em>all</em> cards in the opponent's deck that have the same
attack or defense as the opponent's card.</p>

<blockquote><p><em>Note:</em> You might run into trouble when you mutate a list as you're iterating
through it. Try iterating through a copy instead! You can use slicing to copy
a list:</p>

<pre><code>  &gt;&gt;&gt; lst = [1, 2, 3, 4]
  &gt;&gt;&gt; copy = lst[:]
  &gt;&gt;&gt; copy
  [1, 2, 3, 4]
  &gt;&gt;&gt; copy is lst
  False</code></pre></blockquote>

<solution>

<pre><code>class ProfessorCard(Card):
    cardtype = &#x27;Professor&#x27;

    def effect(self, opponent_card, player, opponent):
        &quot;&quot;&quot;
        Adds the attack and defense of the opponent&#x27;s card to
        all cards in the player&#x27;s deck, then removes all cards
        in the opponent&#x27;s deck that share an attack or defense
        stat with the opponent&#x27;s card.
        &gt;&gt;&gt; test_card = Card(&#x27;card&#x27;, 300, 300)
        &gt;&gt;&gt; professor_test = ProfessorCard(&#x27;Professor&#x27;, 500, 500)
        &gt;&gt;&gt; opponent_card = test_card.copy()
        &gt;&gt;&gt; test_deck = Deck([test_card.copy() for _ in range(8)])
        &gt;&gt;&gt; player1, player2 = Player(test_deck.copy(), &#x27;p1&#x27;), Player(test_deck.copy(), &#x27;p2&#x27;)
        &gt;&gt;&gt; professor_test.effect(opponent_card, player1, player2)
        3 cards were discarded from p2&#x27;s deck!
        &gt;&gt;&gt; [(card.attack, card.defense) for card in player1.deck.cards]
        [(600, 600), (600, 600), (600, 600)]
        &gt;&gt;&gt; len(player2.deck.cards)
        0
        &quot;&quot;&quot;
        orig_opponent_deck_length = len(opponent.deck.cards)
        "*** YOUR CODE HERE ***"
        discarded = orig_opponent_deck_length &#x2d; len(opponent.deck.cards)
        if discarded:
            #Uncomment the line below when you&#x27;ve finished implementing this method!
            #print(&#x27;{} cards were discarded from {}\&#x27;s deck!&#x27;.format(discarded, opponent.name))
            return</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q ProfessorCard.effect</code></pre>

<p>After you complete this problem, we'll have a fully functional game of Magic:
The Lambda-ing! This doesn't have to be the end, though - we encourage you to
get creative with more card types, effects, and even adding more custom cards
to your deck!</p>

<h3 class="question" id="q10">Q10: Cycles</h3>

<p>The <code>Link</code> class can represent lists with cycles.  That is, a list may
contain itself as a sublist.</p>

<pre><code>&gt;&gt;&gt; s = Link(1, Link(2, Link(3)))
&gt;&gt;&gt; s.rest.rest.rest = s
&gt;&gt;&gt; s.rest.rest.rest.rest.rest.first
3</code></pre>

<p>Implement <code>has_cycle</code>,that returns whether its argument, a <code>Link</code>
instance, contains a cycle.</p>

<blockquote><p><em>Hint</em>: Iterate through the linked list and try keeping track of which <code>Link</code>
objects you've already seen.</p></blockquote>

<solution>

<pre><code>def has_cycle(link):
    &quot;&quot;&quot;Return whether link contains a cycle.

    &gt;&gt;&gt; s = Link(1, Link(2, Link(3)))
    &gt;&gt;&gt; s.rest.rest.rest = s
    &gt;&gt;&gt; has_cycle(s)
    True
    &gt;&gt;&gt; t = Link(1, Link(2, Link(3)))
    &gt;&gt;&gt; has_cycle(t)
    False
    &gt;&gt;&gt; u = Link(2, Link(2, Link(2)))
    &gt;&gt;&gt; has_cycle(u)
    False
    &quot;&quot;&quot;
    "*** YOUR CODE HERE ***"
</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q has_cycle</code></pre>

<p>As an extra challenge, implement <code>has_cycle_constant</code> with only <a href="http://composingprograms.com/pages/28-efficiency.html#growth-categories">constant space</a>. (If you followed
the hint above, you will use linear space.) The solution is short (less than 20
lines of code), but requires a clever idea. Try to discover the solution
yourself before asking around:</p>

<solution>

<pre><code>def has_cycle_constant(link):
    &quot;&quot;&quot;Return whether link contains a cycle.

    &gt;&gt;&gt; s = Link(1, Link(2, Link(3)))
    &gt;&gt;&gt; s.rest.rest.rest = s
    &gt;&gt;&gt; has_cycle_constant(s)
    True
    &gt;&gt;&gt; t = Link(1, Link(2, Link(3)))
    &gt;&gt;&gt; has_cycle_constant(t)
    False
    &quot;&quot;&quot;
    "*** YOUR CODE HERE ***"
</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q has_cycle_constant</code></pre>

<h3 class="question" id="q11">Q11: Every Other</h3>

<p>Implement <code>every_other</code>, which takes a linked list <code>s</code>. It mutates <code>s</code> such
that all of the odd-indexed elements (using 0-based indexing) are removed from
the list. For example:</p>

<pre><code>&gt;&gt;&gt; s = Link(&#x27;a&#x27;, Link(&#x27;b&#x27;, Link(&#x27;c&#x27;, Link(&#x27;d&#x27;))))
&gt;&gt;&gt; every_other(s)
&gt;&gt;&gt; s.first
&#x27;a&#x27;
&gt;&gt;&gt; s.rest.first
&#x27;c&#x27;
&gt;&gt;&gt; s.rest.rest is Link.empty
True</code></pre>

<p>If <code>s</code> contains fewer than two elements, <code>s</code> remains unchanged.</p>

<blockquote><p>Do not return anything! <code>every_other</code> should mutate the original list.</p></blockquote>

<solution>

<pre><code>def every_other(s):
    &quot;&quot;&quot;Mutates a linked list so that all the odd&#x2d;indiced elements are removed
    (using 0&#x2d;based indexing).

    &gt;&gt;&gt; s = Link(1, Link(2, Link(3, Link(4))))
    &gt;&gt;&gt; every_other(s)
    &gt;&gt;&gt; s
    Link(1, Link(3))
    &gt;&gt;&gt; odd_length = Link(5, Link(3, Link(1)))
    &gt;&gt;&gt; every_other(odd_length)
    &gt;&gt;&gt; odd_length
    Link(5, Link(1))
    &gt;&gt;&gt; singleton = Link(4)
    &gt;&gt;&gt; every_other(singleton)
    &gt;&gt;&gt; singleton
    Link(4)
    &quot;&quot;&quot;
    "*** YOUR CODE HERE ***"
</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q every_other</code></pre>

<h3 class="question" id="q12">Q12: Reverse Other</h3>

<p>Write a function <code>reverse_other</code> that mutates the tree such that <strong>labels</strong> on
<em>every other</em> (odd-depth) level are reversed. For example,
<code>Tree(1,[Tree(2, [Tree(4)]), Tree(3)])</code> becomes <code>Tree(1,[Tree(3, [Tree(4)]), Tree(2)])</code>.
Notice that the nodes themselves are <em>not</em> reversed; only the labels are.</p>

<solution>

<pre><code>def reverse_other(t):
    &quot;&quot;&quot;Mutates the tree such that nodes on every other (odd&#x2d;depth) level
    have the labels of their branches all reversed.

    &gt;&gt;&gt; t = Tree(1, [Tree(2), Tree(3), Tree(4)])
    &gt;&gt;&gt; reverse_other(t)
    &gt;&gt;&gt; t
    Tree(1, [Tree(4), Tree(3), Tree(2)])
    &gt;&gt;&gt; t = Tree(1, [Tree(2, [Tree(3, [Tree(4), Tree(5)]), Tree(6, [Tree(7)])]), Tree(8)])
    &gt;&gt;&gt; reverse_other(t)
    &gt;&gt;&gt; t
    Tree(1, [Tree(8, [Tree(3, [Tree(5), Tree(4)]), Tree(6, [Tree(7)])]), Tree(2)])
    &quot;&quot;&quot;
    "*** YOUR CODE HERE ***"
</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q reverse_other</code></pre>
<script>
    $('.alwaystoggle').css('display', 'inline-block');
    $('.alwaystoggle').click(function() {
      var solution_id = $(this).attr('id');
      $('div.' + solution_id).slideToggle(600);
    });
</script>

  </div>

  <div class='col-md-3 sticky'>
    <nav class='hidden-print hidden-sm hidden-xs sidebar'>
      <ul>
  <li><a href="index.html#topics">Topics</a></li>
  <ul>
    <li><a href="index.html#object-oriented-programming">Object-Oriented Programming</a></li>
    <li><a href="index.html#linked-lists">Linked Lists</a></li>
    <li><a href="index.html#mutable-trees">Mutable Trees</a></li>
  </ul>
  <li><a href="index.html#required-questions">Required Questions</a></li>
  <ul>
    <li><a href="index.html#wwpd-objects">WWPD: Objects</a></li>
    <ul>
      <li><a href="index.html#q1">Q1: The Car class</a></li>
    </ul>
    <li><a href="index.html#magic-the-lambda-ing">Magic: The Lambda-ing</a></li>
    <ul>
      <li><a href="index.html#q2">Q2: Making Cards</a></li>
      <li><a href="index.html#q3">Q3: Making a Player</a></li>
    </ul>
    <li><a href="index.html#wwpd-linked-lists">WWPD: Linked Lists</a></li>
    <ul>
      <li><a href="index.html#q4">Q4: WWPD: Linked Lists</a></li>
    </ul>
    <li><a href="index.html#linked-lists-2">Linked Lists</a></li>
    <ul>
      <li><a href="index.html#q5">Q5: Convert Link</a></li>
    </ul>
    <li><a href="index.html#trees">Trees</a></li>
    <ul>
      <li><a href="index.html#q6">Q6: Cumulative Mul</a></li>
    </ul>
  </ul>
  <li><a href="index.html#optional-questions">Optional Questions</a></li>
  <ul>
    <li><a href="index.html#q7">Q7: Tutors: Flummox</a></li>
    <li><a href="index.html#q8">Q8: TAs: Shift</a></li>
    <li><a href="index.html#q9">Q9: The Professor Arrives</a></li>
    <li><a href="index.html#q10">Q10: Cycles</a></li>
    <li><a href="index.html#q11">Q11: Every Other</a></li>
    <li><a href="index.html#q12">Q12: Reverse Other</a></li>
  </ul>
</ul>
    </nav>
  </div>
</div>

    </main>

    <footer class="container">
      <div class="row text-center">
        <div class="col col-sm-4">
          <h3><a href="../../index.html">CS 61A</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="../../weekly/index.html">Weekly Schedule</a></li>
            <li><a href="../../office-hours/index.html">Office Hours</a></li>
            <li><a href="../../staff/index.html">Staff</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="../../resources/index.html">Resources</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="../../articles/studying/index.html">Studying Guide</a></li>
            <li><a href="../../articles/debugging/index.html">Debugging Guide</a></li>
            <li><a href="../../articles/composition/index.html">Composition Guide</a></li>
            <li><a href="../../articles/pair-programming/index.html">Pair Programming</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="../../articles/about/index.html">Policies</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="../../articles/about/index.html#assignments">Assignments</a></li>
            <li><a href="../../articles/about/index.html#exams">Exams</a></li>
            <li><a href="../../articles/about/index.html#grading">Grading</a></li>
          </ul>
        </div>
      </div>
    </footer>

    

    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/loader.min.js"></script>
  <link rel="stylesheet" data-name="vs/editor/editor.main" href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/editor/editor.main.min.css">
  <script>
      require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs' }});
      window.MonacoEnvironment = { getWorkerUrl: () => URL.createObjectURL(new Blob([`
      self.MonacoEnvironment = {
          baseUrl: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min'
      };
      importScripts('https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/base/worker/workerMain.min.js');
  `], { type: 'text/javascript' }))
  };
  </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsPlumb/2.15.5/js/jsplumb.min.js"></script>
    <script src="../../assets/js/network_storage.js"></script>
    <script src="../../assets/js/storable.js"></script>
    <script src="../../assets/js/editor.js"></script>
    <script src="../../assets/js/env-diagram.js"></script>
    
<script src="../../assets/js/sketchy.js"></script>
<script>
  $('.sidebar ul').addClass('nav nav-stacked noselect');
  $('body').scrollspy({
    target: '.sidebar',
    offset: 40
  });

  function goToId(id) {
    var target = $(id);
    target.parent().show();
    $('html,body').animate({
      scrollTop: target.offset().top,
    }, 100);
    $("body").scrollspy('refresh');
  }

  if (location.hash) {
    setTimeout(function() {
      if (location.hash) {
        goToId(location.hash);
      }
    }, 1);
  }

  $("a").click(function(event) {
    var urlBeforeHashRegEx = new RegExp("^"+window.location.href.split("#")[0]);
    if (/^#/.test(this.hash) && urlBeforeHashRegEx.test(this.href)) {
      event.preventDefault();
      goToId(this.hash);
      document.location.hash = this.hash;
    }
  });
</script>

  </body>
</html>