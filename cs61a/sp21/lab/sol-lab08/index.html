
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="description" content ="CS 61A: Structure and Interpretation of Computer Programs" />
    <meta name="keywords" content ="CS 61A, Computer Science, CS, 61A, Programming, John DeNero, Berkeley, EECS" />
    <meta name="author" content ="Pamela Fox, Paul Hilfinger" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-throttle-debounce/1.1/jquery.ba-throttle-debounce.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="../../assets/js/hl.js"></script>
    <script>
        // we aren't registering builtins since
        //      (1) they don't render differently in the current CSS from other names
        //      (2) it's a mess to list all of them. You can extract from the site but that takes effort
        // if (1) ceases to be true, (2) might be worth the effort. For now, we're leaving as is
        hljsRegister({
            'keyword': "define if cond and or let begin lambda mu quote delay cons-stream set! quasiquote unquote unquote-splicing define-macro"
        });
        hljs.initHighlightingOnLoad();
    </script>
    <script src="../../assets/js/dark-mode.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata|Roboto:300,400,500|Work+Sans:400,700">
    <link rel="stylesheet" href="../../assets/css/style.css">
    <link rel="stylesheet" href="../../assets/css/mono-blue.css">
    <link rel="icon" href="../../assets/images/favicon.ico">

    

<link rel="stylesheet" type="text/css" href="../../assets/css/lab.css">


    <title>
Lab 8 Solutions | CS 61A Spring 2021
</title>
  </head>

  <body id="index" class="home">
    <nav class="navbar navbar-default navbar-static-top">
      <div class="container noselect">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-section">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../../index.html">
            <img style="max-width:60px; margin-top: -20px;" class="logo" src="../../assets/images/logo.png"/>
          </a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse-section">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="../../weekly/index.html">Weekly Schedule</a></li>
            <li><a href="../../office-hours/index.html">Office Hours</a></li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="index.html#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Staff
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a href="../../instructor/index.html">Instructors</a></li>
                <li><a href="../../TAs/index.html">TAs</a></li>
                <li><a href="../../tutors/index.html">Tutors</a></li>
                <li><a href="../../academic-interns/index.html">Academic Interns</a></li>
              </ul>
            </li>
            <li><a href="../../resources/index.html">Resources</a></li>
            <li><a href="../../articles/about/index.html">Syllabus</a></li>
            <li><a href="https://piazza.com/berkeley/spring2021/cs61a" target="_blank">Piazza</a></li>
            <li><a href="https://code.cs61a.org">Code</a></li>
            <li><a href="http://tutor.cs61a.org">PyTutor</a></li>
            <li><a href="../../contact/index.html">Contact</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <main id="content" class="container">
      
<div class='row'>
  <div class='col-md-9'>
    <header>
      <h1>
        
Lab 8 Solutions

        
        
        <ul class="inline-block list-inline">
          <li><a href="lab08.zip" class="label label-outline">lab08.zip</a></li>
        </ul>
        
        
      </h1>
    </header>
    
<h2>Solution Files</h2>


    
<h2 id="submission">Submission</h2>


<p>In order to facilitate midterm studying, solutions to this lab were released with the lab. We encourage you to try out the problems and struggle for a while before looking at the solutions!
<strong>Note: You do not need to run</strong> <code>python ok &#x2d;&#x2d;submit</code> <strong>to receive credit for this assignment.</strong></p>


<h1 id="required-questions">Required Questions</h1>

<h3 class="question" id="q1">Q1: All Questions Are Optional</h3>

<p>The questions in this assignment are not graded, but they are highly recommended to help you prepare for the upcoming midterm. You will receive credit for this lab even if you do not complete these questions.</p>

<p>This question has no Ok tests.</p>


<h1 id="suggested-questions">Suggested Questions</h1>



<h2 id="recursion-and-tree-recursion">Recursion and Tree Recursion</h2>


<h3 class="question" id="q2">Q2: Subsequences</h3>

<p>A subsequence of a sequence <code>S</code> is a subset of elements from <code>S</code>, in the same
order they appear in <code>S</code>. Consider the list <code>[1, 2, 3]</code>. Here are a few of it's
subsequences <code>[]</code>, <code>[1, 3]</code>, <code>[2]</code>, and <code>[1, 2, 3]</code>.</p>

<p>Write a function that takes in a list and returns all possible subsequences of that list.
The subsequences should be returned as a list of lists, where each nested list is a
subsequence of the original input.</p>

<p>In order to accomplish this, you might first want to write a function <code>insert_into_all</code>
that takes an item and a list of lists, adds the item to the beginning of each nested list,
and returns the resulting list.</p>

<solution>

<pre><code>def insert_into_all(item, nested_list):
    &quot;&quot;&quot;Return a new list consisting of all the lists in nested_list,
    but with item added to the front of each. You can assuming that
     nested_list is a list of lists.

    &gt;&gt;&gt; nl = [[], [1, 2], [3]]
    &gt;&gt;&gt; insert_into_all(0, nl)
    [[0], [0, 1, 2], [0, 3]]
    &quot;&quot;&quot;
<div class="sol-highlight">    return [[item] + lst for lst in nested_list]</div>
def subseqs(s):
    &quot;&quot;&quot;Return a nested list (a list of lists) of all subsequences of S.
    The subsequences can appear in any order. You can assume S is a list.

    &gt;&gt;&gt; seqs = subseqs([1, 2, 3])
    &gt;&gt;&gt; sorted(seqs)
    [[], [1], [1, 2], [1, 2, 3], [1, 3], [2], [2, 3], [3]]
    &gt;&gt;&gt; subseqs([])
    [[]]
    &quot;&quot;&quot;
<div class="sol-highlight">    if not s:</div><div class="sol-highlight">        return [[]]</div>    else:
<div class="sol-highlight">        subset = subseqs(s[1:])</div><div class="sol-highlight">        return insert_into_all(s[0], subset) + subset</div></code></pre>

</solution>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q subseqs</code></pre>

<h3 class="question" id="q3">Q3: Non-Decreasing Subsequences</h3>

<p>Just like the last question, we want to write a function that takes a list and
returns a list of lists, where each individual list is a subsequence of the
original input.</p>

<p>This time we have another condition: we only want the subsequences for which
consecutive elements are <em>nondecreasing</em>.  For example, <code>[1, 3, 2]</code> is a
subsequence of <code>[1, 3, 2, 4]</code>, but since 2 &lt; 3, this subsequence would <em>not</em>
be included in our result.</p>

<p><strong>Fill in the blanks</strong> to complete the implementation of the <code>inc_subseqs</code>
function. You may assume that the input list contains no negative elements.</p>

<p>You may use the provided helper function <code>insert_into_all</code>, which takes in an
<code>item</code> and a list of lists and inserts the <code>item</code> to the front of each list.</p>

<solution>

<pre><code>def non_decrease_subseqs(s):
    &quot;&quot;&quot;Assuming that S is a list, return a nested list of all subsequences
    of S (a list of lists) for which the elements of the subsequence
    are strictly nondecreasing. The subsequences can appear in any order.

    &gt;&gt;&gt; seqs = non_decrease_subseqs([1, 3, 2])
    &gt;&gt;&gt; sorted(seqs)
    [[], [1], [1, 2], [1, 3], [2], [3]]
    &gt;&gt;&gt; non_decrease_subseqs([])
    [[]]
    &gt;&gt;&gt; seqs2 = non_decrease_subseqs([1, 1, 2])
    &gt;&gt;&gt; sorted(seqs2)
    [[], [1], [1], [1, 1], [1, 1, 2], [1, 2], [1, 2], [2]]
    &quot;&quot;&quot;
    def subseq_helper(s, prev):
        if not s:
<div class="sol-highlight">            return [[]]</div>        elif s[0] &lt; prev:
<div class="sol-highlight">            return subseq_helper(s[1:], prev)</div>        else:
<div class="sol-highlight">            a = subseq_helper(s[1:], s[0])</div><div class="sol-highlight">            b = subseq_helper(s[1:], prev)</div><div class="sol-highlight">            return insert_into_all(s[0], a) + b</div><div class="sol-highlight">    return subseq_helper(s, 0)</div></code></pre>

</solution>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q non_decrease_subseqs</code></pre>

<h3 class="question" id="q4">Q4: Number of Trees</h3>

<p>A <strong>full binary tree</strong> is a tree where each node has either 2 branches or 0 branches, but never 1 branch.</p>

<p>Write a function which returns the number of unique full binary tree structures that have exactly n leaves.</p>

<p>For those interested in combinatorics, this problem does have a <a href="http://en.wikipedia.org/wiki/Catalan_number">closed
form solution</a>):</p>

<solution>

<pre><code>def num_trees(n):
    &quot;&quot;&quot;Returns the number of unique full binary trees with exactly n leaves. E.g.,

    1   2        3       3    ...
    *   *        *       *
       / \      / \     / \
      *   *    *   *   *   *
              / \         / \
             *   *       *   *

    &gt;&gt;&gt; num_trees(1)
    1
    &gt;&gt;&gt; num_trees(2)
    1
    &gt;&gt;&gt; num_trees(3)
    2
    &gt;&gt;&gt; num_trees(8)
    429

    &quot;&quot;&quot;
<div class="sol-highlight">    if n == 1:
        return 1
    return sum(num_trees(k) * num_trees(n&#x2d;k) for k in range(1, n))</div></code></pre>

</solution>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q num_trees</code></pre>


<h2 id="generators">Generators</h2>

<h3 class="question" id="q5">Q5: Merge</h3>

<p>Implement <code>merge(incr_a, incr_b)</code>, which takes two iterables <code>incr_a</code> and <code>incr_b</code> whose
elements are ordered. <code>merge</code> yields elements from <code>incr_a</code> and <code>incr_b</code> in sorted
order, eliminating repetition.  You may assume <code>incr_a</code> and <code>incr_b</code> themselves do not
contain repeats, and that none of the elements of either are <code>None</code>.
You may <strong>not</strong> assume that the iterables are finite; either may produce an infinite
stream of results.</p>

<p>You will probably find it helpful to use the two-argument version of the built-in
<code>next</code> function: <code>next(incr, v)</code> is the same as <code>next(incr)</code>, except that instead of
raising <code>StopIteration</code> when <code>incr</code> runs out of elements, it returns <code>v</code>.</p>

<p>See the doctest for examples of behavior.</p>

<solution>

<pre><code>def merge(incr_a, incr_b):
    &quot;&quot;&quot;Yield the elements of strictly increasing iterables incr_a and incr_b, removing
    repeats. Assume that incr_a and incr_b have no repeats. incr_a or incr_b may or may not
    be infinite sequences.

    &gt;&gt;&gt; m = merge([0, 2, 4, 6, 8, 10, 12, 14], [0, 3, 6, 9, 12, 15])
    &gt;&gt;&gt; type(m)
    &lt;class &#x27;generator&#x27;&gt;
    &gt;&gt;&gt; list(m)
    [0, 2, 3, 4, 6, 8, 9, 10, 12, 14, 15]
    &gt;&gt;&gt; def big(n):
    ...    k = 0
    ...    while True: yield k; k += n
    &gt;&gt;&gt; m = merge(big(2), big(3))
    &gt;&gt;&gt; [next(m) for _ in range(11)]
    [0, 2, 3, 4, 6, 8, 9, 10, 12, 14, 15]
    &quot;&quot;&quot;
    iter_a, iter_b = iter(incr_a), iter(incr_b)
    next_a, next_b = next(iter_a, None), next(iter_b, None)
<div class="sol-highlight">    while next_a is not None or next_b is not None:
        if next_a is None or next_b is not None and next_b &lt; next_a:
            yield next_b
            next_b = next(iter_b, None)
        elif next_b is None or next_a is not None and next_a &lt; next_b:
            yield next_a
            next_a = next(iter_a, None)
        else:
            yield next_a
            next_a, next_b = next(iter_a, None), next(iter_b, None)</div></code></pre>

</solution>

<br />

<p>Watch the hints video below for somewhere to start:

            <iframe width="560" height="315" src="https://youtube.com/embed/wBwcnB5CNZg"
                frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen></iframe></p>

<br />

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q merge</code></pre>


<h2 id="objects">Objects</h2>


<blockquote><p><strong>Minilecture Video: <a href="https://youtu.be/5uNdgu4mxxQ">OOP</a></strong></p></blockquote>

<h3 class="question" id="q6">Q6: Keyboard</h3>

<p>We'd like to create a <code>Keyboard</code> class that takes in an arbitrary
number of <code>Button</code>s and stores these <code>Button</code>s in a dictionary. The
keys in the dictionary will be ints that represent the postition on the
<code>Keyboard</code>, and the values will be the respective <code>Button</code>. Fill out
the methods in the <code>Keyboard</code> class according to each description,
using the doctests as a reference for the behavior of a <code>Keyboard</code>.</p>

<solution>

<pre><code>class Button:
    &quot;&quot;&quot;
    Represents a single button
    &quot;&quot;&quot;
    def __init__(self, pos, key):
        &quot;&quot;&quot;
        Creates a button
        &quot;&quot;&quot;
        self.pos = pos
        self.key = key
        self.times_pressed = 0

class Keyboard:
    &quot;&quot;&quot;A Keyboard takes in an arbitrary amount of buttons, and has a
    dictionary of positions as keys, and values as Buttons.

    &gt;&gt;&gt; b1 = Button(0, &quot;H&quot;)
    &gt;&gt;&gt; b2 = Button(1, &quot;I&quot;)
    &gt;&gt;&gt; k = Keyboard(b1, b2)
    &gt;&gt;&gt; k.buttons[0].key
    &#x27;H&#x27;
    &gt;&gt;&gt; k.press(1)
    &#x27;I&#x27;
    &gt;&gt;&gt; k.press(2) #No button at this position
    &#x27;&#x27;
    &gt;&gt;&gt; k.typing([0, 1])
    &#x27;HI&#x27;
    &gt;&gt;&gt; k.typing([1, 0])
    &#x27;IH&#x27;
    &gt;&gt;&gt; b1.times_pressed
    2
    &gt;&gt;&gt; b2.times_pressed
    3
    &quot;&quot;&quot;

    def __init__(self, *args):
<div class="sol-highlight">        self.buttons = {}</div><div class="sol-highlight">        for button in args:</div><div class="sol-highlight">            self.buttons[button.pos] = button</div>
    def press(self, info):
        &quot;&quot;&quot;Takes in a position of the button pressed, and
        returns that button&#x27;s output&quot;&quot;&quot;
<div class="sol-highlight">        if info in self.buttons.keys():</div><div class="sol-highlight">            b = self.buttons[info]</div><div class="sol-highlight">            b.times_pressed += 1</div><div class="sol-highlight">            return b.key</div><div class="sol-highlight">        return &#x27;&#x27;</div>
    def typing(self, typing_input):
        &quot;&quot;&quot;Takes in a list of positions of buttons pressed, and
        returns the total output&quot;&quot;&quot;
<div class="sol-highlight">        accumulate = &#x27;&#x27;</div><div class="sol-highlight">        for pos in typing_input:</div><div class="sol-highlight">            accumulate+=self.press(pos)</div><div class="sol-highlight">        return accumulate</div></code></pre>

</solution>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q Keyboard</code></pre>

<h3 class="question" id="q7">Q7: Bank Account</h3>

<p>Implement the class <code>Account</code>, which acts as a a Bank Account.
<code>Account</code> should allow the account holder to deposit money into the account,
withdraw money from the account, and view their transaction history. The Bank Account
should also prevents a user from withdrawing more than the current balance.</p>

<p>Transaction history should be stored as a list of tuples, where each tuple contains the
type of transaction and the transaction amount. For example a withdrawal of 500 should
be stored as ('withdraw', 500)</p>

<blockquote><p><strong>Hint:</strong> You can call the <code>str</code> function on an integer to get a string representation of the integer.
You might find this function useful when implementing the <code>__repr__</code> and <code>__str__</code> methods.</p>

<p><strong>Hint:</strong> You can alternatively use <a href="https://realpython.com/python-f-strings/">fstrings</a> to implement the <code>__repr__</code> and <code>__str__</code> methods cleanly.</p></blockquote>

<solution>

<pre><code>class Account:
    &quot;&quot;&quot;A bank account that allows deposits and withdrawals.
    It tracks the current account balance and a transaction
    history of deposits and withdrawals.

    &gt;&gt;&gt; eric_account = Account(&#x27;Eric&#x27;)
    &gt;&gt;&gt; eric_account.deposit(1000000)   # depositing paycheck for the week
    1000000
    &gt;&gt;&gt; eric_account.transactions
    [(&#x27;deposit&#x27;, 1000000)]
    &gt;&gt;&gt; eric_account.withdraw(100)      # make a withdrawal to buy dinner
    999900
    &gt;&gt;&gt; eric_account.transactions
    [(&#x27;deposit&#x27;, 1000000), (&#x27;withdraw&#x27;, 100)]
    &gt;&gt;&gt; print(eric_account) #call to __str__
    Eric&#x27;s Balance: $999900
    &gt;&gt;&gt; eric_account.deposit(10)
    999910
    &gt;&gt;&gt; eric_account #call to __repr__
    Accountholder: Eric, Deposits: 2, Withdraws: 1
    &quot;&quot;&quot;

    interest = 0.02

    def __init__(self, account_holder):
        self.balance = 0
        self.holder = account_holder
        &quot;*** YOUR CODE HERE ***&quot;
<div class="sol-highlight">        self.transactions = []</div>
    def deposit(self, amount):
        &quot;&quot;&quot;Increase the account balance by amount, add the deposit
        to the transaction history, and return the new balance.
        &quot;&quot;&quot;
        &quot;*** YOUR CODE HERE ***&quot;
<div class="sol-highlight">        self.transactions.append((&#x27;deposit&#x27;, amount))
        self.balance = self.balance + amount
        return self.balance</div>
    def withdraw(self, amount):
        &quot;&quot;&quot;Decrease the account balance by amount, add the withdraw
        to the transaction history, and return the new balance.
        &quot;&quot;&quot;
        &quot;*** YOUR CODE HERE ***&quot;
<div class="sol-highlight">        self.transactions.append((&#x27;withdraw&#x27;, amount))
        if amount &gt; self.balance:
            return &#x27;Insufficient funds&#x27;
        self.balance = self.balance &#x2d; amount
        return self.balance</div>
    def __str__(self):
<div class="sol-highlight">        return f&quot;{self.holder}&#x27;s Balance: ${self.balance}&quot;</div>
    def __repr__(self):
<div class="sol-highlight">        num_deposits, num_withdraws = 0, 0
        for transaction in self.transactions:
            if transaction[0] == &quot;withdraw&quot;:
                num_withdraws += 1
            else:
                num_deposits += 1
        return f&quot;Accountholder: {self.holder}, Deposits: {num_deposits}, Withdraws: {num_withdraws}&quot;</div></code></pre>

</solution>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q Account</code></pre>


<h2 id="mutable-lists">Mutable Lists</h2>

<h3 class="question" id="q8">Q8: Trade</h3>

<p>In the integer market, each participant has a list of positive integers to
trade. When two participants meet, they trade the smallest non-empty prefix of
their list of integers. A prefix is a slice that starts at index
0.</p>

<p>Write a function <code>trade</code> that exchanges the first <code>m</code> elements of list <code>first</code>
with the first <code>n</code> elements of list <code>second</code>, such that the sums of those
elements are equal, and the sum is as small as possible. If no such prefix
exists, return the string <code>&#x27;No deal!&#x27;</code> and do not change either list. Otherwise
change both lists and return <code>&#x27;Deal!&#x27;</code>. A partial implementation is provided.</p>

<blockquote><p><strong>Hint:</strong> You can mutate a slice of a list using <em>slice assignment</em>. To do so, specify
a slice of the list <code>[i:j]</code> on the left-hand side of an assignment statement
and another list on the right-hand side of the assignment statement. The
operation will replace the entire given slice of the list from <code>i</code> inclusive
to <code>j</code> exclusive with the elements from the given list. The slice and the
given list need not be the same length.</p>

<pre><code>&gt;&gt;&gt; a = [1, 2, 3, 4, 5, 6]
&gt;&gt;&gt; b = a
&gt;&gt;&gt; a[2:5] = [10, 11, 12, 13]
&gt;&gt;&gt; a
[1, 2, 10, 11, 12, 13, 6]
&gt;&gt;&gt; b
[1, 2, 10, 11, 12, 13, 6]</code></pre>

<p>Additionally, recall that the starting and ending indices for a slice can be left out
and Python will use a default value. <code>lst[i:]</code> is the same as <code>lst[i:len(lst)]</code>, and
<code>lst[:j]</code> is the same as <code>lst[0:j]</code>.</p></blockquote>

<solution>

<pre><code>def trade(first, second):
    &quot;&quot;&quot;Exchange the smallest prefixes of first and second that have equal sum.

    &gt;&gt;&gt; a = [1, 1, 3, 2, 1, 1, 4]
    &gt;&gt;&gt; b = [4, 3, 2, 7]
    &gt;&gt;&gt; trade(a, b) # Trades 1+1+3+2=7 for 4+3=7
    &#x27;Deal!&#x27;
    &gt;&gt;&gt; a
    [4, 3, 1, 1, 4]
    &gt;&gt;&gt; b
    [1, 1, 3, 2, 2, 7]
    &gt;&gt;&gt; c = [3, 3, 2, 4, 1]
    &gt;&gt;&gt; trade(b, c)
    &#x27;No deal!&#x27;
    &gt;&gt;&gt; b
    [1, 1, 3, 2, 2, 7]
    &gt;&gt;&gt; c
    [3, 3, 2, 4, 1]
    &gt;&gt;&gt; trade(a, c)
    &#x27;Deal!&#x27;
    &gt;&gt;&gt; a
    [3, 3, 2, 1, 4]
    &gt;&gt;&gt; b
    [1, 1, 3, 2, 2, 7]
    &gt;&gt;&gt; c
    [4, 3, 1, 4, 1]
    &quot;&quot;&quot;
    m, n = 1, 1

<div class="sol-highlight">    equal_prefix = lambda: sum(first[:m]) == sum(second[:n])</div><div class="sol-highlight">    while m &lt; len(first) and n &lt; len(second) and not equal_prefix():</div><div class="sol-highlight">        if sum(first[:m]) &lt; sum(second[:n]):</div>            m += 1
        else:
            n += 1

    if equal_prefix():
        first[:m], second[:n] = second[:n], first[:m]
        return &#x27;Deal!&#x27;
    else:
        return &#x27;No deal!&#x27;</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q trade</code></pre>

<h3 class="question" id="q9">Q9: Shuffle</h3>

<p>Define a function <code>shuffle</code> that takes a sequence with an even number of
elements (cards) and creates a new list that interleaves the elements
of the first half with the elements of the second half.</p>

<solution>

<pre><code>def card(n):
    &quot;&quot;&quot;Return the playing card numeral as a string for a positive n &lt;= 13.&quot;&quot;&quot;
    assert type(n) == int and n &gt; 0 and n &lt;= 13, &quot;Bad card n&quot;
    specials = {1: &#x27;A&#x27;, 11: &#x27;J&#x27;, 12: &#x27;Q&#x27;, 13: &#x27;K&#x27;}
    return specials.get(n, str(n))

def shuffle(cards):
    &quot;&quot;&quot;Return a shuffled list that interleaves the two halves of cards.

    &gt;&gt;&gt; shuffle(range(6))
    [0, 3, 1, 4, 2, 5]
    &gt;&gt;&gt; suits = [&#x27;♡&#x27;, &#x27;♢&#x27;, &#x27;♤&#x27;, &#x27;♧&#x27;]
    &gt;&gt;&gt; cards = [card(n) + suit for n in range(1,14) for suit in suits]
    &gt;&gt;&gt; cards[:12]
    [&#x27;A♡&#x27;, &#x27;A♢&#x27;, &#x27;A♤&#x27;, &#x27;A♧&#x27;, &#x27;2♡&#x27;, &#x27;2♢&#x27;, &#x27;2♤&#x27;, &#x27;2♧&#x27;, &#x27;3♡&#x27;, &#x27;3♢&#x27;, &#x27;3♤&#x27;, &#x27;3♧&#x27;]
    &gt;&gt;&gt; cards[26:30]
    [&#x27;7♤&#x27;, &#x27;7♧&#x27;, &#x27;8♡&#x27;, &#x27;8♢&#x27;]
    &gt;&gt;&gt; shuffle(cards)[:12]
    [&#x27;A♡&#x27;, &#x27;7♤&#x27;, &#x27;A♢&#x27;, &#x27;7♧&#x27;, &#x27;A♤&#x27;, &#x27;8♡&#x27;, &#x27;A♧&#x27;, &#x27;8♢&#x27;, &#x27;2♡&#x27;, &#x27;8♤&#x27;, &#x27;2♢&#x27;, &#x27;8♧&#x27;]
    &gt;&gt;&gt; shuffle(shuffle(cards))[:12]
    [&#x27;A♡&#x27;, &#x27;4♢&#x27;, &#x27;7♤&#x27;, &#x27;10♧&#x27;, &#x27;A♢&#x27;, &#x27;4♤&#x27;, &#x27;7♧&#x27;, &#x27;J♡&#x27;, &#x27;A♤&#x27;, &#x27;4♧&#x27;, &#x27;8♡&#x27;, &#x27;J♢&#x27;]
    &gt;&gt;&gt; cards[:12]  # Should not be changed
    [&#x27;A♡&#x27;, &#x27;A♢&#x27;, &#x27;A♤&#x27;, &#x27;A♧&#x27;, &#x27;2♡&#x27;, &#x27;2♢&#x27;, &#x27;2♤&#x27;, &#x27;2♧&#x27;, &#x27;3♡&#x27;, &#x27;3♢&#x27;, &#x27;3♤&#x27;, &#x27;3♧&#x27;]
    &quot;&quot;&quot;
    assert len(cards) % 2 == 0, &#x27;len(cards) must be even&#x27;
<div class="sol-highlight">    half = len(cards) // 2</div>    shuffled = []
<div class="sol-highlight">    for i in range(half):</div><div class="sol-highlight">        shuffled.append(cards[i])</div><div class="sol-highlight">        shuffled.append(cards[half+i])</div>    return shuffled</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q shuffle</code></pre>


<h2 id="linked-lists">Linked Lists</h2>

<h3 class="question" id="q10">Q10: Insert</h3>

<p>Implement a function <code>insert</code> that takes a <code>Link</code>, a <code>value</code>, and an
<code>index</code>, and inserts the <code>value</code> into the <code>Link</code> at the given <code>index</code>.
You can assume the linked list already has at least one element. Do not
return anything -- <code>insert</code> should mutate the linked list.</p>

<blockquote><p><strong>Note</strong>: If the index is out of bounds, you should raise an <code>IndexError</code> with:</p>

<pre><code>raise IndexError(&#x27;Out of bounds!&#x27;)</code></pre></blockquote>

<solution>

<pre><code>def insert(link, value, index):
    &quot;&quot;&quot;Insert a value into a Link at the given index.

    &gt;&gt;&gt; link = Link(1, Link(2, Link(3)))
    &gt;&gt;&gt; print(link)
    &lt;1 2 3&gt;
    &gt;&gt;&gt; other_link = link
    &gt;&gt;&gt; insert(link, 9001, 0)
    &gt;&gt;&gt; print(link)
    &lt;9001 1 2 3&gt;
    &gt;&gt;&gt; link is other_link # Make sure you are using mutation! Don&#x27;t create a new linked list.
    True
    &gt;&gt;&gt; insert(link, 100, 2)
    &gt;&gt;&gt; print(link)
    &lt;9001 1 100 2 3&gt;
    &gt;&gt;&gt; insert(link, 4, 5)
    Traceback (most recent call last):
        ...
    IndexError: Out of bounds!
    &quot;&quot;&quot;
<div class="sol-highlight">    if index == 0:
        link.rest = Link(link.first, link.rest)
        link.first = value
    elif link.rest is Link.empty:
        raise IndexError(&quot;Out of bounds!&quot;)
    else:
        insert(link.rest, value, index &#x2d; 1)</div>
<div class="sol-highlight"># iterative solution
def insert_iter(link, value, index):
    while index &gt; 0 and link.rest is not Link.empty:
        link = link.rest
        index &#x2d;= 1
    if index == 0:
        link.rest = Link(link.first, link.rest)
        link.first = value
    else:
        raise IndexError</div></code></pre>

</solution>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q insert</code></pre>

<h3 class="question" id="q11">Q11: Deep Linked List Length</h3>

<p>A linked list that contains one or more linked lists as elements is called a
<em>deep</em> linked list. Write a function <code>deep_len</code> that takes in a (possibly deep)
linked list and returns the <em>deep length</em> of that linked list. The deep length of
a linked list is the total number of non-link elements in the list, as well as the
total number of elements contained in all contained lists. See the function's doctests
for examples of the deep length of linked lists.</p>

<blockquote><p><strong>Hint:</strong> Use <code>isinstance</code> to check if something is an instance of an object.</p></blockquote>

<solution>

<pre><code>def deep_len(lnk):
    &quot;&quot;&quot; Returns the deep length of a possibly deep linked list.

    &gt;&gt;&gt; deep_len(Link(1, Link(2, Link(3))))
    3
    &gt;&gt;&gt; deep_len(Link(Link(1, Link(2)), Link(3, Link(4))))
    4
    &gt;&gt;&gt; levels = Link(Link(Link(1, Link(2)), \
            Link(3)), Link(Link(4), Link(5)))
    &gt;&gt;&gt; print(levels)
    &lt;&lt;&lt;1 2&gt; 3&gt; &lt;4&gt; 5&gt;
    &gt;&gt;&gt; deep_len(levels)
    5
    &quot;&quot;&quot;
<div class="sol-highlight">    if lnk is Link.empty:</div>        return 0
<div class="sol-highlight">    elif not isinstance(lnk, Link):</div>        return 1
    else:
<div class="sol-highlight">        return deep_len(lnk.first) + deep_len(lnk.rest)</div></code></pre>

</solution>

<div class="sol-highlight">
	Video Walkthrough: <a href='https://youtu.be/pbMeCRUU7yw?t=2m28s'> https://youtu.be/pbMeCRUU7yw?t=2m28s </a>
</div>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q deep_len</code></pre>

<h3 class="question" id="q12">Q12: Linked Lists as Strings</h3>

<p>Kevin and Jerry like different ways of displaying the linked list
structure in Python. While Kevin likes box and pointer diagrams,
Jerry prefers a more futuristic way. Write a function
<code>make_to_string</code> that returns a function that converts the
linked list to a string in their preferred style.</p>

<p><em>Hint</em>:  You can convert numbers to strings using the <code>str</code> function,
and you can combine strings together using <code>+</code>.</p>

<pre><code>&gt;&gt;&gt; str(4)
&#x27;4&#x27;
&gt;&gt;&gt; &#x27;cs &#x27; + str(61) + &#x27;a&#x27;
&#x27;cs 61a&#x27;</code></pre>

<solution>

<pre><code>def make_to_string(front, mid, back, empty_repr):
    &quot;&quot;&quot; Returns a function that turns linked lists to strings.

    &gt;&gt;&gt; kevins_to_string = make_to_string(&quot;[&quot;, &quot;|&#x2d;]&#x2d;&#x2d;&gt;&quot;, &quot;&quot;, &quot;[]&quot;)
    &gt;&gt;&gt; jerrys_to_string = make_to_string(&quot;(&quot;, &quot; . &quot;, &quot;)&quot;, &quot;()&quot;)
    &gt;&gt;&gt; lst = Link(1, Link(2, Link(3, Link(4))))
    &gt;&gt;&gt; kevins_to_string(lst)
    &#x27;[1|&#x2d;]&#x2d;&#x2d;&gt;[2|&#x2d;]&#x2d;&#x2d;&gt;[3|&#x2d;]&#x2d;&#x2d;&gt;[4|&#x2d;]&#x2d;&#x2d;&gt;[]&#x27;
    &gt;&gt;&gt; kevins_to_string(Link.empty)
    &#x27;[]&#x27;
    &gt;&gt;&gt; jerrys_to_string(lst)
    &#x27;(1 . (2 . (3 . (4 . ()))))&#x27;
    &gt;&gt;&gt; jerrys_to_string(Link.empty)
    &#x27;()&#x27;
    &quot;&quot;&quot;
    def printer(lnk):
<div class="sol-highlight">        if lnk is Link.empty:</div><div class="sol-highlight">            return empty_repr</div>        else:
<div class="sol-highlight">            return front + str(lnk.first) + mid + printer(lnk.rest) + back</div>    return printer</code></pre>

</solution>

<div class="sol-highlight">
	Video Walkthrough: <a href='https://youtu.be/pbMeCRUU7yw?t=14m22s'> https://youtu.be/pbMeCRUU7yw?t=14m22s </a>
</div>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q make_to_string</code></pre>


<h2 id="trees">Trees</h2>

<h3 class="question" id="q13">Q13: Prune Small</h3>

<p>Complete the function <code>prune_small</code> that takes in a <code>Tree</code> <code>t</code> and a
number <code>n</code> and prunes <code>t</code> mutatively. If <code>t</code> or any of its branches
has more than <code>n</code> branches, the <code>n</code> branches with the smallest labels
should be kept and any other branches should be <em>pruned</em>, or removed,
from the tree.</p>

<solution>

<pre><code>def prune_small(t, n):
    &quot;&quot;&quot;Prune the tree mutatively, keeping only the n branches
    of each node with the smallest label.

    &gt;&gt;&gt; t1 = Tree(6)
    &gt;&gt;&gt; prune_small(t1, 2)
    &gt;&gt;&gt; t1
    Tree(6)
    &gt;&gt;&gt; t2 = Tree(6, [Tree(3), Tree(4)])
    &gt;&gt;&gt; prune_small(t2, 1)
    &gt;&gt;&gt; t2
    Tree(6, [Tree(3)])
    &gt;&gt;&gt; t3 = Tree(6, [Tree(1), Tree(3, [Tree(1), Tree(2), Tree(3)]), Tree(5, [Tree(3), Tree(4)])])
    &gt;&gt;&gt; prune_small(t3, 2)
    &gt;&gt;&gt; t3
    Tree(6, [Tree(1), Tree(3, [Tree(1), Tree(2)])])
    &quot;&quot;&quot;
<div class="sol-highlight">    while len(t.branches) &gt;  n:</div><div class="sol-highlight">        largest = max(t.branches, key=lambda x: x.label)</div><div class="sol-highlight">        t.branches.remove(largest)</div><div class="sol-highlight">    for b in t.branches:</div><div class="sol-highlight">        prune_small(b, n)</div></code></pre>

</solution>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q prune_small</code></pre>

<h3 class="question" id="q14">Q14: Long Paths</h3>

<p>Implement <code>long_paths</code>, which returns a list of all <em>paths</em> in a tree with
length at least <code>n</code>. A path in a tree is a list of node labels that starts with
the root and ends at a leaf. Each subsequent element must be from a label of a
branch of the previous value's node. The <em>length</em> of a path is the number of
edges in the path (i.e. one less than the number of nodes in the path).  Paths
are ordered in the output list from left to right in the tree. See the doctests
for some examples.</p>

<solution>

<pre><code>def long_paths(t, n):
    &quot;&quot;&quot;Return a list of all paths in t with length at least n.

    &gt;&gt;&gt; long_paths(Tree(1), 0)
    [[1]]
    &gt;&gt;&gt; long_paths(Tree(1), 1)
    []
    &gt;&gt;&gt; t = Tree(3, [Tree(4), Tree(4), Tree(5)])
    &gt;&gt;&gt; left = Tree(1, [Tree(2), t])
    &gt;&gt;&gt; mid = Tree(6, [Tree(7, [Tree(8)]), Tree(9)])
    &gt;&gt;&gt; right = Tree(11, [Tree(12, [Tree(13, [Tree(14)])])])
    &gt;&gt;&gt; whole = Tree(0, [left, Tree(13), mid, right])
    &gt;&gt;&gt; print(whole)
    0
      1
        2
        3
          4
          4
          5
      13
      6
        7
          8
        9
      11
        12
          13
            14
    &gt;&gt;&gt; for path in long_paths(whole, 2):
    ...     print(path)
    ...
    [0, 1, 2]
    [0, 1, 3, 4]
    [0, 1, 3, 4]
    [0, 1, 3, 5]
    [0, 6, 7, 8]
    [0, 6, 9]
    [0, 11, 12, 13, 14]
    &gt;&gt;&gt; for path in long_paths(whole, 3):
    ...     print(path)
    ...
    [0, 1, 3, 4]
    [0, 1, 3, 4]
    [0, 1, 3, 5]
    [0, 6, 7, 8]
    [0, 11, 12, 13, 14]
    &gt;&gt;&gt; long_paths(whole, 4)
    [[0, 11, 12, 13, 14]]
    &quot;&quot;&quot;
<div class="sol-highlight">    if n &lt;= 0 and t.is_leaf():
        return [[t.label]]
    paths = []
    for b in t.branches:
        for path in long_paths(b, n &#x2d; 1):
            paths.append([t.label] + path)
    return paths</div></code></pre>

</solution>

<p>Use Ok to test your code:</p><pre><code class="nohighlight">python3 ok -q long_paths</code></pre>


<h2 id="complexity">Complexity</h2>

<h3 class="question" id="q15">Q15: Determining Complexity</h3>

<blockquote><p>Use Ok to test your knowledge with the following questions:</p>

<pre><code>python3 ok &#x2d;q wwpd&#x2d;complexity &#x2d;u</code></pre>

<p>Be sure to ask a member of course staff if you don't understand the correct
answer!</p></blockquote>

<p>What is the order of growth of <code>is_prime</code> in terms of <code>n</code>?</p>

<pre><code>def is_prime(n):
    for i in range(2, n):
        if n % i == 0:
            return False
    return True</code></pre>

<solution>
Linear Θ(n).

<p><em>Explanation</em>: In the worst case, <em>n</em> is prime, and we have to execute the
loop <em>n</em> - 2 times. Each iteration takes constant time (one conditional check
and one return statement). Therefore, the total time is (<em>n</em> - 2) x constant,
or simply linear.
</solution></p>

<p>What is the order of growth of <code>bar</code> in terms of <code>n</code>?</p>

<pre><code>def bar(n):
    i, sum = 1, 0
    while i &lt;= n:
        sum += biz(n)
        i += 1
    return sum

def biz(n):
    i, sum = 1, 0
    while i &lt;= n:
        sum += i**3
        i += 1
    return sum</code></pre>

<solution>
Quadratic Θ(n^2).

<p><em>Explanation</em>: The body of the while loop in <code>bar</code> is executed <em>n</em>
times. Each iteration, one call to <code>biz(n)</code> is made. Note that <em>n</em> never
changes, so this call takes the same time to run each iteration. Taking a look at
<code>biz</code>, we see that there is another while loop. Be careful to note that
although the term being added to <code>sum</code> is cubed (<code>i**3</code>), <code>i</code> itself is only
incremented by 1 in each iteration. This tells us that this while loop also
executes <em>n</em> times, with each iteration taking constant time , so the total
time of <code>biz(n)</code> is <em>n</em> x constant, or linear. Knowing the runtime of
linear, we can conclude that each iteration of the while loop in <code>bar</code> is linear.
Therefore, the total runtime of <code>bar(n)</code> is quadratic.
</solution></p>

<!--
What is the order of growth of <code>foo</code> in terms of <code>n</code>, where <code>n</code> is the length
of <code>lst</code>? Assume that slicing a list and calling <code>len</code> on a list can both be
done in constant time.

<pre><code>def foo(lst, i):
    mid = len(lst) // 2
    if mid == 0:
        return lst
    elif i &gt; 0:
        return foo(lst[mid:], &#x2d;1)
    else:
        return foo(lst[:mid], 1)</code></pre>

<solution>
&theta;(log(<em>n</em>)).

<p><em>Explanation</em>: A single recursive call is made in the body of <code>foo</code> on half the
input list (either the first half or the second half depending on the input
flag <code>i</code>). The base case is executed when the list either is empty or has only
one element. We start with an <em>n</em> element list and halve the list until there
is at most 1 element, which means there will be log(<em>n</em>) total calls. Each
call, constant work is done if we ignore the recursive call. The total runtime
is then log(<em>n</em>) * &theta;(1).</p>

<p><em>Note</em>: We simplified this problem by assuming that slicing a list takes
constant time. In reality, this operation is a bit more nuanced and may take
linear time. As an additional exercise, try determining the order of growth
of this function if we assuming slicing takes linear time.
</solution>--></p>

  </div>

  <div class='col-md-3 sticky'>
    <nav class='hidden-print hidden-sm hidden-xs sidebar'>
      <ul>
  <li><a href="index.html#submission">Submission</a></li>
  <li><a href="index.html#required-questions">Required Questions</a></li>
  <ul>
    <li><a href="index.html#q1">Q1: All Questions Are Optional</a></li>
  </ul>
  <li><a href="index.html#suggested-questions">Suggested Questions</a></li>
  <ul>
    <li><a href="index.html#recursion-and-tree-recursion">Recursion and Tree Recursion</a></li>
    <ul>
      <li><a href="index.html#q2">Q2: Subsequences</a></li>
      <li><a href="index.html#q3">Q3: Non-Decreasing Subsequences</a></li>
      <li><a href="index.html#q4">Q4: Number of Trees</a></li>
    </ul>
    <li><a href="index.html#generators">Generators</a></li>
    <ul>
      <li><a href="index.html#q5">Q5: Merge</a></li>
    </ul>
    <li><a href="index.html#objects">Objects</a></li>
    <ul>
      <li><a href="index.html#q6">Q6: Keyboard</a></li>
      <li><a href="index.html#q7">Q7: Bank Account</a></li>
    </ul>
    <li><a href="index.html#mutable-lists">Mutable Lists</a></li>
    <ul>
      <li><a href="index.html#q8">Q8: Trade</a></li>
      <li><a href="index.html#q9">Q9: Shuffle</a></li>
    </ul>
    <li><a href="index.html#linked-lists">Linked Lists</a></li>
    <ul>
      <li><a href="index.html#q10">Q10: Insert</a></li>
      <li><a href="index.html#q11">Q11: Deep Linked List Length</a></li>
      <li><a href="index.html#q12">Q12: Linked Lists as Strings</a></li>
    </ul>
    <li><a href="index.html#trees">Trees</a></li>
    <ul>
      <li><a href="index.html#q13">Q13: Prune Small</a></li>
      <li><a href="index.html#q14">Q14: Long Paths</a></li>
    </ul>
    <li><a href="index.html#complexity">Complexity</a></li>
    <ul>
      <li><a href="index.html#q15">Q15: Determining Complexity</a></li>
    </ul>
  </ul>
</ul>
    </nav>
  </div>
</div>

    </main>

    <footer class="container">
      <div class="row text-center">
        <div class="col col-sm-4">
          <h3><a href="../../index.html">CS 61A</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="../../weekly/index.html">Weekly Schedule</a></li>
            <li><a href="../../office-hours/index.html">Office Hours</a></li>
            <li><a href="../../staff/index.html">Staff</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="../../resources/index.html">Resources</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="../../articles/studying/index.html">Studying Guide</a></li>
            <li><a href="../../articles/debugging/index.html">Debugging Guide</a></li>
            <li><a href="../../articles/composition/index.html">Composition Guide</a></li>
            <li><a href="../../articles/pair-programming/index.html">Pair Programming</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="../../articles/about/index.html">Policies</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="../../articles/about/index.html#assignments">Assignments</a></li>
            <li><a href="../../articles/about/index.html#exams">Exams</a></li>
            <li><a href="../../articles/about/index.html#grading">Grading</a></li>
          </ul>
        </div>
      </div>
    </footer>

    

    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/loader.min.js"></script>
  <link rel="stylesheet" data-name="vs/editor/editor.main" href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/editor/editor.main.min.css">
  <script>
      require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs' }});
      window.MonacoEnvironment = { getWorkerUrl: () => URL.createObjectURL(new Blob([`
      self.MonacoEnvironment = {
          baseUrl: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min'
      };
      importScripts('https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/base/worker/workerMain.min.js');
  `], { type: 'text/javascript' }))
  };
  </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsPlumb/2.15.5/js/jsplumb.min.js"></script>
    <script src="../../assets/js/network_storage.js"></script>
    <script src="../../assets/js/storable.js"></script>
    <script src="../../assets/js/editor.js"></script>
    <script src="../../assets/js/env-diagram.js"></script>
    
<script src="../../assets/js/sketchy.js"></script>
<script>
  $('.sidebar ul').addClass('nav nav-stacked noselect');
  $('body').scrollspy({
    target: '.sidebar',
    offset: 40
  });

  function goToId(id) {
    var target = $(id);
    target.parent().show();
    $('html,body').animate({
      scrollTop: target.offset().top,
    }, 100);
    $("body").scrollspy('refresh');
  }

  if (location.hash) {
    setTimeout(function() {
      if (location.hash) {
        goToId(location.hash);
      }
    }, 1);
  }

  $("a").click(function(event) {
    var urlBeforeHashRegEx = new RegExp("^"+window.location.href.split("#")[0]);
    if (/^#/.test(this.hash) && urlBeforeHashRegEx.test(this.href)) {
      event.preventDefault();
      goToId(this.hash);
      document.location.hash = this.hash;
    }
  });
</script>

  </body>
</html>