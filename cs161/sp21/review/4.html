<!DOCTYPE html>
<html lang="en">

  <head><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Lecture 4 Review Videos | CS 161</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Lecture 4 Review Videos" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="CS 161: Computer Security" />
<meta property="og:description" content="CS 161: Computer Security" />
<link rel="canonical" href="https://www.cs161.org//review/4" />
<meta property="og:url" content="https://www.cs161.org//review/4" />
<meta property="og:site_name" content="CS 161" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Lecture 4 Review Videos" />
<script type="application/ld+json">
{"headline":"Lecture 4 Review Videos","description":"CS 161: Computer Security","url":"https://www.cs161.org//review/4","@type":"WebPage","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<style type="text/css">
    body,h1,h2,h3,h4,h5,h6,p,blockquote,pre,hr,dl,dd,ol,ul,figure{margin:0;padding:0}body{font:400 16px/1.5 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";color:#111;background-color:#fdfdfd;-webkit-text-size-adjust:100%;-webkit-font-feature-settings:"kern" 1;-moz-font-feature-settings:"kern" 1;-o-font-feature-settings:"kern" 1;font-feature-settings:"kern" 1;font-kerning:normal;display:flex;min-height:100vh;flex-direction:column}h1,h2,h3,h4,h5,h6,p,blockquote,pre,ul,ol,dl,figure,.highlight{margin-bottom:15px}main{display:block}img{max-width:100%;vertical-align:middle}figure>img{display:block}figcaption{font-size:14px}ul,ol{margin-left:30px}li>ul,li>ol{margin-bottom:0}h1,h2,h3,h4,h5,h6{font-weight:400}a{color:#2a7ae2;text-decoration:none}a:visited{color:#1756a9}a:hover{color:#111;text-decoration:underline}blockquote{color:#828282;border-left:4px solid #e8e8e8;padding-left:15px;font-size:18px;letter-spacing:-1px;font-style:italic}blockquote>:last-child{margin-bottom:0}pre,code{font-size:15px;border:1px solid #e8e8e8;border-radius:3px;background-color:#eef}code{padding:1px 5px}pre{padding:8px 12px;overflow-x:auto}pre>code{border:0;padding-right:0;padding-left:0}.wrapper{max-width:-webkit-calc(1000px - (30px));max-width:calc(1000px - (30px));margin-right:auto;margin-left:auto;padding-right:15px;padding-left:15px}@media screen and (min-width: 1000px){.wrapper{max-width:-webkit-calc(1000px - (30px * 2));max-width:calc(1000px - (30px * 2));padding-right:30px;padding-left:30px}}.wrapper:after{content:"";display:table;clear:both}.orange{color:#f66a0a}.grey{color:#828282}.svg-icon{width:16px;height:16px;display:inline-block;fill:currentColor;padding:5px 3px 2px 5px;vertical-align:text-bottom}table{margin-bottom:30px;width:100%;text-align:left;color:#3f3f3f;border-collapse:collapse;border:1px solid #e8e8e8}table tr.is-even{background-color:#f7f7f7}table tr p{margin:0}table th,table td{padding:10px 15px}table th{background-color:#f0f0f0;border:1px solid #dedede;border-bottom-color:#c9c9c9}table td{border:1px solid #e8e8e8}.alert-warning{color:#856404;background-color:#fff3cd;border-color:#ffeeba;border-radius:0.25rem;padding:15px}.site-header{border-bottom:1px solid #e8e8e8;min-height:55.95px;line-height:54px;position:relative}.site-title{font-size:26px;font-weight:300;letter-spacing:-1px;margin-bottom:0;float:left}@media screen and (max-width: 800px){.site-title{padding-right:45px}}.site-title,.site-title:visited{color:#424242}.site-title:hover{text-decoration:none}.site-title img{vertical-align:sub}.site-nav{position:absolute;top:9px;right:15px;background-color:#fdfdfd;border:1px solid #e8e8e8;border-radius:5px;text-align:right;z-index:10000}.site-nav .nav-trigger{display:none}.site-nav .menu-icon{float:right;width:36px;height:26px;line-height:0;padding-top:10px;text-align:center}.site-nav .menu-icon>svg path{fill:#424242}.site-nav label[for="nav-trigger"]{display:block;float:right;width:36px;height:36px;z-index:10000;cursor:pointer}.site-nav input ~ .trigger{clear:both;display:none}.site-nav input:checked ~ .trigger{display:block;padding-bottom:5px}.site-nav .page-link{color:#111;line-height:1.5;display:block;padding:5px 10px;margin-left:20px}.site-nav .page-link:not(:last-child){margin-right:0}@media screen and (min-width: 800px){.site-nav{position:static;float:right;border:none;background-color:inherit}.site-nav label[for="nav-trigger"]{display:none}.site-nav .menu-icon{display:none}.site-nav input ~ .trigger{display:block}.site-nav .page-link{display:inline;padding:0;margin-left:auto}.site-nav .page-link:not(:last-child){margin-right:20px}}.page-content{padding:30px 0;flex:1 0 auto}.page-heading{font-size:32px}.post-list-heading{font-size:28px}.post-list{margin-left:0;list-style:none}.post-list>li{margin-bottom:30px}.post-meta{font-size:14px;color:#828282}.post-link{display:block;font-size:24px}.post-header{margin-bottom:30px}.post-title,.post-content h1{font-size:42px;letter-spacing:-1px;line-height:1}@media screen and (min-width: 1000px){.post-title,.post-content h1{font-size:42px}}.post-content{margin-bottom:30px}.post-content h2{font-size:28px}@media screen and (min-width: 1000px){.post-content h2{font-size:32px}}.post-content h3{font-size:22px}@media screen and (min-width: 1000px){.post-content h3{font-size:26px}}.post-content h4{font-size:18px}@media screen and (min-width: 1000px){.post-content h4{font-size:20px}}.one-half{width:-webkit-calc(50% - (30px / 2));width:calc(50% - (30px / 2))}.highlight{background:#fff}.highlighter-rouge .highlight{background:#eef}.highlight .c{color:#998;font-style:italic}.highlight .err{color:#a61717;background-color:#e3d2d2}.highlight .k{font-weight:bold}.highlight .o{font-weight:bold}.highlight .cm{color:#998;font-style:italic}.highlight .cp{color:#999;font-weight:bold}.highlight .c1{color:#998;font-style:italic}.highlight .cs{color:#999;font-weight:bold;font-style:italic}.highlight .gd{color:#000;background-color:#fdd}.highlight .gd .x{color:#000;background-color:#faa}.highlight .ge{font-style:italic}.highlight .gr{color:#a00}.highlight .gh{color:#999}.highlight .gi{color:#000;background-color:#dfd}.highlight .gi .x{color:#000;background-color:#afa}.highlight .go{color:#888}.highlight .gp{color:#555}.highlight .gs{font-weight:bold}.highlight .gu{color:#aaa}.highlight .gt{color:#a00}.highlight .kc{font-weight:bold}.highlight .kd{font-weight:bold}.highlight .kp{font-weight:bold}.highlight .kr{font-weight:bold}.highlight .kt{color:#458;font-weight:bold}.highlight .m{color:#099}.highlight .s{color:#d14}.highlight .na{color:teal}.highlight .nb{color:#0086B3}.highlight .nc{color:#458;font-weight:bold}.highlight .no{color:teal}.highlight .ni{color:purple}.highlight .ne{color:#900;font-weight:bold}.highlight .nf{color:#900;font-weight:bold}.highlight .nn{color:#555}.highlight .nt{color:navy}.highlight .nv{color:teal}.highlight .ow{font-weight:bold}.highlight .w{color:#bbb}.highlight .mf{color:#099}.highlight .mh{color:#099}.highlight .mi{color:#099}.highlight .mo{color:#099}.highlight .sb{color:#d14}.highlight .sc{color:#d14}.highlight .sd{color:#d14}.highlight .s2{color:#d14}.highlight .se{color:#d14}.highlight .sh{color:#d14}.highlight .si{color:#d14}.highlight .sx{color:#d14}.highlight .sr{color:#009926}.highlight .s1{color:#d14}.highlight .ss{color:#990073}.highlight .bp{color:#999}.highlight .vc{color:teal}.highlight .vg{color:teal}.highlight .vi{color:teal}.highlight .il{color:#099}.schedule__agenda-elem ol,.schedule__agenda-elem ul{margin-bottom:0}.schedule__discussion--examprep{font-style:italic}.schedule__event-elem{text-align:center}.staff-container{display:flex;flex-direction:row;justify-content:space-evenly;flex-wrap:wrap}.staff-portrait{margin:25px}.staff-name{text-align:center}

  </style>
  <link rel="icon" type="image/x-icon" href="../assets/logo.gif" >

  <link rel="prefetch" href="../calendar.js" as="script">
  <link rel="prefetch" href="../calendar.css" as="style">
</head>
</head>

  <body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="../index.html">
      <img src="../assets/logo.gif" height="34" width="34" alt="" />
      CS 161
    </a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="https://cs161.org/calendar.html">Calendar</a><a class="page-link" href="../staff.html">Staff</a><a class="page-link" href="../policies.html">Policies</a><a class="page-link" href="../resources.html">Resources</a><a class="page-link" href="../oh.html">Queue</a><a class="page-link" href="https://cs161.org/extensions.html">Extensions</a><a class="page-link" href="https://cs161.org/exam.html">Exam Logistics</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <div class="post-content">
    <h1 id="review-videos-for-lecture-4-buffer-overflow-defenses">Review Videos for Lecture 4: Buffer Overflow Defenses</h1>

<ul>
  <li><a href="4/su20_lec04.pdf">Summer 2020 Slides</a></li>
  <li><a href="4/lec04_optional.pdf">Optional slides</a></li>
  <li><a href="https://www.youtube.com/playlist?list=PLfBkt1-_BHX_IVvquXXoCHuUFRH3sjcAs">Playlist</a> (length: 45:36)</li>
</ul>

<h2 id="ensuring-memory-safety">Ensuring Memory Safety</h2>

<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/QCJSP7ZmJRg?rel=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<p><br />
<br /></p>

<h2 id="optional-reasoning-about-memory-safety">Optional: Reasoning About Memory Safety</h2>

<p>One way to ensure memory safety is to carefully reason about memory accesses in your code, by defining pre-conditions and post-conditions for every function you write and using invariants to prove that these conditions are satisfied. Although it is a good skill to have, this process is rarely used in practice, so it is out of scope for the summer.</p>

<p>If you are interested, the Spring 2020 video is linked below. It will not be tested on any exams or projects.</p>

<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/d8UGf6aWiQI?rel=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<p><br />
<br /></p>

<p>(End of optional content. Everything below this is in scope.)</p>

<h2 id="use-a-memory-safe-language">Use a Memory-Safe Language</h2>

<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/bE9JI71j3Bs?rel=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<p><br /></p>

<p>True or false: Using a memory-safe language prevents 100% of buffer overflow attacks.</p>
<div class="sanity-check-answer-container">

<button onclick="oneShow()">Show answer</button>

<div id="one" style="display:none;">
<p>True. If the language is designed with bounds checking, there is absolutely nothing an attacker can do to cause a buffer overflow. Of all the defenses discussed in this lecture, using a memory-safe language is the only one that prevents 100% of buffer overflow attacks.</p>

</div>

<script>
function oneShow() {
  var x = document.getElementById("one");
  if (x.style.display === "none") {
    x.style.display = "block";
  } else {
    x.style.display = "none";
  }
}
</script>

</div>

<p><br />
<br /></p>

<h2 id="defending-non-memory-safe-code">Defending Non-Memory-Safe Code</h2>

<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/m1vrzrzJaeM?rel=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<p><br />
<br /></p>

<h2 id="stack-canaries">Stack Canaries</h2>

<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/GdVG50jOB_Y?rel=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<p><br /></p>

<p>An attacker runs a vulnerable program with some input that leaks the stack canary, and writes down the value of the leaked stack canary. Then the attacker runs the program again, using the leaked canary value to overwrite the stack canary. True or false: this strategy defeats the stack canary defense.</p>
<div class="sanity-check-answer-container">

<button onclick="twoShow()">Show answer</button>

<div id="two" style="display:none;">
<p>False. The stack canary changes every time the program is run. The attacker would need to learn the value of the stack canary and overwrite the canary with the leaked value in one single execution of the program. (This is what you will do in Project 1!)</p>

</div>

<script>
function twoShow() {
  var x = document.getElementById("two");
  if (x.style.display === "none") {
    x.style.display = "block";
  } else {
    x.style.display = "none";
  }
}
</script>

</div>

<p><br />
<br /></p>

<h2 id="guessing-the-canary">Guessing the Canary</h2>

<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/DpcB2zz1Teg?rel=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<p>How many bits of entropy would a canary on a 64-bit system have if one of the bytes is always 0x00?</p>
<div class="sanity-check-answer-container">

<button onclick="threeShow()">Show answer</button>

<div id="three" style="display:none;">
<p>One byte is 8 bits, so the canary would have 64-8=56 bits of entropy.</p>

</div>

<script>
function threeShow() {
  var x = document.getElementById("three");
  if (x.style.display === "none") {
    x.style.display = "block";
  } else {
    x.style.display = "none";
  }
}
</script>

</div>

<p><br />
<br /></p>

<h2 id="non-executable-pages">Non-Executable Pages</h2>

<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/D3B5o1SwpFA?rel=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<p><br /></p>

<p>True or false: An attacker cannot do anything malicious if non-executable pages are enabled. (Hint: Think about the analogy from the last lecture.)</p>
<div class="sanity-check-answer-container">

<button onclick="fourShow()">Show answer</button>

<div id="four" style="display:none;">
<p>False. An attacker can still overwrite local variables, like in the first class airplane ticket example from the previous lecture. Non-executable pages do not prevent this because the attacker isn’t executing any instructions on the stack. The next video introduces another way to defeat non-executable pages.</p>

</div>

<script>
function fourShow() {
  var x = document.getElementById("four");
  if (x.style.display === "none") {
    x.style.display = "block";
  } else {
    x.style.display = "none";
  }
}
</script>

</div>

<p><br />
<br /></p>

<h2 id="return-into-libc">Return Into libc</h2>

<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/RVDYvFcLahw?rel=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<p><br />
<br /></p>

<h2 id="return-oriented-programming">Return-Oriented Programming</h2>

<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/EufF6gyih8M?rel=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<p><br /></p>

<p>Why does enabling non-executable pages not prevent return-oriented programming?</p>
<div class="sanity-check-answer-container">

<button onclick="fiveShow()">Show answer</button>

<div id="five" style="display:none;">
<p>Return-oriented programming is running code gadgets that already exist in memory. Non-executable pages only stop an attacker from executing code that the attacker has written into memory.</p>

</div>

<script>
function fiveShow() {
  var x = document.getElementById("five");
  if (x.style.display === "none") {
    x.style.display = "block";
  } else {
    x.style.display = "none";
  }
}
</script>

</div>

<p><br />
<br /></p>

<h2 id="address-space-layout-randomization-aslr">Address Space Layout Randomization (ASLR)</h2>
<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/leuLz3EWGLY?rel=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<p><br /></p>

<p>True or false: If ASLR is enabled but DEP is not enabled, an attacker can write malicious code to the stack and overwrite the return address to execute that code.</p>
<div class="sanity-check-answer-container">

<button onclick="sixShow()">Show answer</button>

<div id="six" style="display:none;">
<p>False. The attacker wouldn’t know the address of the malicious code to overwrite the return address with. However, if the code had some vulnerability that leaked addresses, this attack might work.</p>

</div>

<script>
function sixShow() {
  var x = document.getElementById("six");
  if (x.style.display === "none") {
    x.style.display = "block";
  } else {
    x.style.display = "none";
  }
}
</script>

</div>

<p><br />
<br /></p>

<h2 id="defenses-in-practice">Defenses in Practice</h2>

<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/uH0qLv3RddI?rel=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<p><br />
<br /></p>

<h2 id="fuzz-testing">Fuzz Testing</h2>

<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/2y9nwHY0xkU?rel=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<p><br />
<br /></p>

<h2 id="memory-safety-conclusion">Memory Safety Conclusion</h2>

<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/MylMDskBtUU?rel=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<p><br /></p>


  </div>

</article>

      </div>
    </main><script src="https://instant.page/1.2.2" type="module"
        integrity="sha384-2xV8M5griQmzyiY3CDqh1dn4z3llDVqZDqzjzcY+jCBCk/a5fXJmuZ/40JJAPeoU"></script>
</body>

</html>
